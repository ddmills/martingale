{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/geotic/build/geotic.js","src/app.js","src/boot.js","src/components/agent.js","src/components/bounds.js","src/components/index.js","src/components/position-bound-sprite.js","src/components/position.js","src/components/renderable.js","src/components/spawnable.js","src/components/sprite.js","src/entities/entity-factory.js","src/entities/fox.js","src/entities/index.js","src/entities/pine-tree.js","src/entities/shrub.js","src/entities/tower.js","src/input/command-queue.js","src/input/commands/command.js","src/input/commands/spawn-entity-command.js","src/input/controllers/input-controller.js","src/input/controllers/map-input-controller.js","src/phaser/bootstrap.js","src/phaser/tile.js","src/prefabs/map.js","src/states/game.js","src/states/loading.js","src/states/preload.js","src/systems/agent-system.js","src/systems/bounds-system.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"boot.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _id = 0;\nvar id = function id() {\n  return ++_id;\n};\n\nvar hash = function hash(n) {\n  return n.sort(function (a, b) {\n    return a > b;\n  }).join('$');\n};\nvar remove = function remove(a, v) {\n  return a.splice(a.indexOf(v), 1);\n};\nvar getComponent = function getComponent(n) {\n  return components.get(n) || newComponent(n);\n};\nvar clone = function clone(o) {\n  return JSON.parse(JSON.stringify(o));\n};\nvar sigs = new Map();\nvar tsigs = new Map();\nvar tags = new Map();\nvar entities = [];\nvar components = new Map();\n\nvar Signature = function () {\n  function Signature(n) {\n    var _this = this;\n\n    _classCallCheck(this, Signature);\n\n    this.na = n;\n    this.en = [];\n    entities.forEach(function (e) {\n      return _this.onAdd(e);\n    });\n  }\n\n  _createClass(Signature, [{\n    key: 'match',\n    value: function match(e) {\n      var k = Object.keys(e.components);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.na[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var n = _step.value;\n\n          if (!k.includes(n)) return false;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: 'onAdd',\n    value: function onAdd(e) {\n      if (this.en.includes(e)) return;\n      this.match(e) && this.en.push(e);\n    }\n  }, {\n    key: 'onRem',\n    value: function onRem(e, c) {\n      this.na.includes(c) && remove(this.en, e);\n    }\n  }], [{\n    key: 'get',\n    value: function get(n) {\n      var h = hash(n);\n      return sigs.has(h) ? sigs.get(h) : Signature.make(n, h);\n    }\n  }, {\n    key: 'make',\n    value: function make(n, h) {\n      var t = new Signature(n);\n      sigs.set(h, t);\n      return t;\n    }\n  }]);\n\n  return Signature;\n}();\n\nvar TagSignature = function (_Signature) {\n  _inherits(TagSignature, _Signature);\n\n  function TagSignature() {\n    _classCallCheck(this, TagSignature);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(TagSignature).apply(this, arguments));\n  }\n\n  _createClass(TagSignature, [{\n    key: 'match',\n    value: function match(e) {\n      var k = Object.keys(e.tags);\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.na[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var n = _step2.value;\n\n          if (!k.includes(n)) return false;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this.en.push(e);\n    }\n  }], [{\n    key: 'get',\n    value: function get(n) {\n      var h = hash(n);\n      return tsigs.has(h) ? tsigs.get(h) : TagSignature.make(n, h);\n    }\n  }, {\n    key: 'make',\n    value: function make(n, h) {\n      var t = new TagSignature(n);\n      tsigs.set(h, t);\n      return t;\n    }\n  }]);\n\n  return TagSignature;\n}(Signature);\n\nvar reserve = ['id', 'listeners', 'serialize', 'deserialize', 'add', 'remove', 'has', 'destroy', 'tag', 'tags', 'untag', 'components', 'on', 'off', 'once', 'emit'];\n\nvar Entity = function () {\n  function Entity(id) {\n    _classCallCheck(this, Entity);\n\n    this.id = id;\n    this.tags = {};\n    this.listeners = new Map();\n  }\n\n  _createClass(Entity, [{\n    key: 'serialize',\n    value: function serialize() {\n      var _this3 = this;\n\n      return {\n        id: this.id,\n        tags: Object.keys(this.t),\n        components: function () {\n          var s = [];\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = Object.keys(_this3.components)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var n = _step3.value;\n\n              s.push({\n                name: n,\n                value: _this3[n].serialize ? _this3[n].serialize() : clone(_this3[n])\n              });\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                _iterator3.return();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n\n          return s;\n        }()\n      };\n    }\n  }, {\n    key: 'add',\n    value: function add(n) {\n      for (var _len = arguments.length, a = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        a[_key - 1] = arguments[_key];\n      }\n\n      attachTo(this, n, getComponent(n).apply(undefined, [this].concat(a)));\n      return this;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(n) {\n      var _n,\n          _this4 = this;\n\n      if (!this[n]) return;\n\n      for (var _len2 = arguments.length, a = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        a[_key2 - 1] = arguments[_key2];\n      }\n\n      this[n].unmount && (_n = this[n]).unmount.apply(_n, [this].concat(a));\n      delete this[n];\n      sigs.forEach(function (t) {\n        return t.onRem(_this4, n);\n      });\n      return this;\n    }\n  }, {\n    key: 'mandate',\n    value: function mandate(n) {\n      for (var _len3 = arguments.length, a = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        a[_key3 - 1] = arguments[_key3];\n      }\n\n      if (!this[n]) this.add.apply(this, [n].concat(a));\n      return this[n];\n    }\n  }, {\n    key: 'has',\n    value: function has(n) {\n      return !!this[n];\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      _destroy(this);\n    }\n  }, {\n    key: 'tag',\n    value: function tag(n) {\n      var _this5 = this;\n\n      var a = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var t = getTag(n);\n      Object.assign(t, a);\n      if (n in this.tags) return this;\n      this.tags[n] = t;\n      tsigs.forEach(function (t) {\n        return t.onAdd(_this5);\n      });\n      return this;\n    }\n  }, {\n    key: 'untag',\n    value: function untag(n) {\n      var _this6 = this;\n\n      if (!this.tags[n]) return;\n      delete this.tags[n];\n      tsigs.forEach(function (t) {\n        return t.onRem(_this6, n);\n      });\n      return this;\n    }\n  }, {\n    key: 'on',\n    value: function on(e, f) {\n      this.listeners.has(e) || this.listeners.set(e, []);\n      this.listeners.get(e).push(f);\n      return this;\n    }\n  }, {\n    key: 'once',\n    value: function once(e, f) {\n      var _this7 = this;\n\n      var fn = function fn() {\n        _this7.off(e, f);\n        f.apply(undefined, arguments);\n      };\n      fn._ = f;\n      return this.on(e, fn);\n    }\n  }, {\n    key: 'off',\n    value: function off(e, f) {\n      var ls = this.listeners.get(e);\n      if (ls && ls.length) {\n        ls.forEach(function (l, i) {\n          if (l === f || l._ === f) {\n            ls.splice(i, 1);\n          }\n        });\n      }\n\n      ls.length ? this.listeners.set(e, ls) : this.listeners.delete(e);\n\n      return this;\n    }\n  }, {\n    key: 'emit',\n    value: function emit(e) {\n      for (var _len4 = arguments.length, a = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        a[_key4 - 1] = arguments[_key4];\n      }\n\n      var ls = this.listeners.get(e);\n      if (ls && ls.length) {\n        ls.forEach(function (l) {\n          return l.apply(undefined, a);\n        });\n      }\n      return this;\n    }\n  }, {\n    key: 'components',\n    get: function get() {\n      var _this8 = this;\n\n      var c = {};\n      Object.keys(this).filter(function (k) {\n        return !reserve.includes(k);\n      }).forEach(function (k) {\n        return c[k] = _this8[k];\n      });\n      return c;\n    }\n  }], [{\n    key: 'deserialize',\n    value: function deserialize(d) {\n      var e = entity(d.id);\n      d.tags.forEach(function (t) {\n        return e.tag(t);\n      });\n      d.components.forEach(function (c) {\n        var m = getComponent(c.name);\n        if (m.deserialize) {\n          attachTo(e, c.name, m.deserialize(e, c.value));\n        } else {\n          if (_typeof(c.value) !== 'object') {\n            attachTo(e, c.name, c.value);\n            return;\n          }\n          var ins = m(e) || {};\n          Object.assign(ins, c.value);\n          attachTo(e, c.name, ins);\n        }\n      });\n    }\n  }]);\n\n  return Entity;\n}();\n\nvar attachTo = function attachTo(e, n, c) {\n  e[n] = c;\n  c.mount && c.mount(e);\n  sigs.forEach(function (s) {\n    return s.onAdd(e);\n  });\n};\n\nvar newComponent = function newComponent(n) {\n  var c = function c(entity) {};\n  components.set(n, c);\n  return c;\n};\n\nvar newTag = function newTag(n) {\n  var t = {};\n  tags.set(n, t);\n  return t;\n};\n\nvar szTags = function szTags() {\n  return [].concat(_toConsumableArray(tags)).map(function (v) {\n    return {\n      name: v[0],\n      value: v[1].serialize ? v[1].serialize() : clone(v[1])\n    };\n  });\n};\n\nvar szEnts = function szEnts() {\n  return entities.map(function (e) {\n    return e.serialize();\n  });\n};\nvar getTag = exports.getTag = function getTag(n) {\n  return tags.get(n) || newTag(n);\n};\nvar component = exports.component = function component(n, d) {\n  if (reserve.includes(n)) throw 'Cannot use a reserved keyword as a component';\n  components.set(n, d);\n};\nvar findByComponent = exports.findByComponent = function findByComponent() {\n  for (var _len5 = arguments.length, n = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    n[_key5] = arguments[_key5];\n  }\n\n  return Signature.get(n).en;\n};\nvar findByTag = exports.findByTag = function findByTag() {\n  for (var _len6 = arguments.length, n = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    n[_key6] = arguments[_key6];\n  }\n\n  return TagSignature.get(n).en;\n};\nvar findById = exports.findById = function findById(id) {\n  return entities.find(function (e) {\n    return e.id === id;\n  });\n};\nvar serialize = exports.serialize = function serialize() {\n  return { tags: szTags(), entities: szEnts() };\n};\nvar entity = exports.entity = function entity() {\n  var i = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\n  var e = new Entity(i || id());\n  entities.push(e);\n  sigs.forEach(function (t) {\n    return t.match(e);\n  });\n  return e;\n};\n\nvar deserialize = exports.deserialize = function deserialize(data) {\n  data.tags.forEach(function (t) {\n    return Object.assign(getTag(t.name), t.value);\n  });\n  data.entities.forEach(function (e) {\n    return Entity.deserialize(e);\n  });\n};\n\nvar _destroy = function _destroy(e) {\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = Object.keys(e.components)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var n = _step4.value;\n      e.remove(n);\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = Object.keys(e.tags)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var t = _step5.value;\n      e.untag(t);\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5.return) {\n        _iterator5.return();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  remove(entities, e);\n};\n\nexports.destroy = _destroy;\nvar clear = exports.clear = function clear() {\n  entities.forEach(function (e) {\n    return e.destroy();\n  });\n  sigs = new Map();\n  tsigs = new Map();\n  tags = new Map();\n  entities = [];\n};\n\nexports.default = {\n  clear: clear,\n  entity: entity,\n  getTag: getTag,\n  destroy: _destroy,\n  findById: findById,\n  findByTag: findByTag,\n  serialize: serialize,\n  deserialize: deserialize,\n  component: component,\n  findByComponent: findByComponent\n};","import EntityFactory from './entities/entity-factory';\r\nimport CommandQueue from './input/command-queue';\r\nimport MapInputController from './input/controllers/map-input-controller';\r\nimport Map from './prefabs/map';\r\nimport BoundSystem from './systems/bounds-system';\r\nimport AgentSystem from './systems/agent-system';\r\n\r\nclass App {\r\n  init(game) {\r\n    this.game = game;\r\n    this.input = this.game.input;\r\n    this.create = new EntityFactory;\r\n    this.map = new Map('paradise');\r\n    this.commandQueue = new CommandQueue();\r\n    this.inputController = new MapInputController();\r\n    this.systems = {\r\n      bounds: new BoundSystem,\r\n      agents: new AgentSystem,\r\n    };\r\n\r\n    // this.systems.bounds.debug = true;\r\n  }\r\n\r\n  get constants() {\r\n    return {\r\n      'TILE_SIZE': 16,\r\n      'MAP_WIDTH': 16,\r\n    };\r\n  }\r\n\r\n  worldX(x) {\r\n    return x * this.constants.TILE_SIZE;\r\n  }\r\n\r\n  worldY(y) {\r\n    return y * this.constants.TILE_SIZE;\r\n  }\r\n\r\n  tileX(worldX) {\r\n    return Math.floor(worldX / this.constants.TILE_SIZE);\r\n  }\r\n\r\n  tileY(worldY) {\r\n    return Math.floor(worldY / this.constants.TILE_SIZE);\r\n  }\r\n\r\n  update() {\r\n    this.inputController.handle();\r\n    this.commandQueue.processAll();\r\n    this.systems.bounds.update();\r\n    this.systems.agents.update(this.game.time.elapsedMS);\r\n  }\r\n};\r\n\r\nlet app = new App;\r\n\r\nexport { app };\r\nexport default app;\r\n","import './phaser/bootstrap';\r\nimport Preload from './states/preload';\r\nimport Loading from './states/loading';\r\nimport Game from './states/game';\r\nimport './components';\r\nimport './entities';\r\n\r\nclass Boot extends Phaser.Game {\r\n  constructor() {\r\n    super(16 * 16, 16 * 16, Phaser.AUTO, 'game-container', null, false, false);\r\n\r\n    this.state.add('Preload', Preload);\r\n    this.state.add('Loading', Loading);\r\n    this.state.add('Game', Game);\r\n\r\n    this.state.start('Preload');\r\n  }\r\n};\r\n\r\nnew Boot;\r\n","import { component } from 'geotic';\r\nimport { app } from './../app';\r\n\r\nclass Agent {\r\n  constructor(behavior) {\r\n    this.behavior = behavior;\r\n  }\r\n\r\n  update(dt) {\r\n    this.behavior(dt);\r\n  }\r\n}\r\n\r\ncomponent('agent', (entity, behavior = (dt) => {}) => {\r\n  entity.mandate('position');\r\n  return new Agent(behavior);\r\n});\r\n","import { component } from 'geotic';\r\nimport app from '../app';\r\n\r\nclass Bounds {\r\n  constructor(position, width = 1, height = 1, offsetX = 0, offsetY = 0) {\r\n    this.position = position;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.offsetX = offsetX;\r\n    this.offsetY = offsetY;\r\n  }\r\n\r\n  get worldX() {\r\n    return app.worldX(this.leftBound);\r\n  }\r\n\r\n  get worldY() {\r\n    return app.worldY(this.topBound);\r\n  }\r\n\r\n  get worldWidth() {\r\n    return this.width * app.constants.TILE_SIZE;\r\n  }\r\n\r\n  get worldHeight() {\r\n    return this.height * app.constants.TILE_SIZE;\r\n  }\r\n\r\n  get leftBound() {\r\n    return this.position.x + this.offsetX;\r\n  }\r\n\r\n  get rightBound() {\r\n    return this.position.x + this.width + this.offsetX;\r\n  }\r\n\r\n  get topBound() {\r\n    return this.position.y + this.offsetY;\r\n  }\r\n\r\n  get bottomBound() {\r\n    return this.position.y + this.height + this.offsetY;\r\n  }\r\n\r\n  contains(x, y) {\r\n    return x > this.leftBound\r\n      && x < this.rightBound\r\n      && y > this.topBound\r\n      && y < this.bottomBound;\r\n  }\r\n\r\n  collidesLeft(other) {\r\n    return this.leftBound < other.rightBound && this.leftBound >= other.leftBound;\r\n  }\r\n\r\n  collidesRight(other) {\r\n    return this.rightBound > other.leftBound && this.rightBound <= other.rightBound;\r\n  }\r\n\r\n  collidesTop(other) {\r\n    return this.topBound < other.bottomBound && this.topBound >= other.topBound;\r\n  }\r\n\r\n  collidesBottom(other) {\r\n    return this.bottomBound > other.topBound && this.bottomBound <= other.bottomBound;\r\n  }\r\n\r\n  collidesWith(other) {\r\n    return (other != this)\r\n      && (this.collidesLeft(other) || this.collidesRight(other))\r\n      && (this.collidesTop(other) || this.collidesBottom(other));\r\n  }\r\n\r\n  debug() {\r\n    const rect = new Phaser.Rectangle(\r\n      this.worldX,\r\n      this.worldY,\r\n      this.worldWidth,\r\n      this.worldHeight\r\n    );\r\n\r\n    app.game.debug.rectangle(rect, '#e300ff', false);\r\n  }\r\n}\r\n\r\ncomponent('bounds', (entity, ...args) => {\r\n  const position = entity.mandate('position');\r\n  return new Bounds(position, ...args);\r\n});\r\n","export { default as sprite } from './sprite';\nexport { default as renderable } from './renderable';\nexport { default as spawnable } from './spawnable';\nexport { default as position } from './position';\nexport { default as bounds } from './bounds';\nexport { default as agent } from './agent';\nexport { default as positionBoundSprite } from './position-bound-sprite';\n","import { component } from 'geotic';\r\nimport { app } from './../app';\r\n\r\nclass PositionBoundSprite {\r\n  constructor(position, sprite, offsetX = 0, offsetY = 0) {\r\n    this.position = position;\r\n    this.sprite = sprite;\r\n    this.offsetX = offsetX;\r\n    this.offsetY = offsetY;\r\n    this.synchronizeSprite()\r\n  }\r\n\r\n  synchronizeSprite() {\r\n    this.sprite.x = this.position.worldX + this.offsetX;\r\n    this.sprite.y = this.position.worldY + this.offsetY;\r\n  }\r\n}\r\n\r\ncomponent('position-bound-sprite', (entity, ...args) => {\r\n  const position = entity.mandate('position');\r\n  const sprite = entity.mandate('sprite');\r\n  const binder = new PositionBoundSprite(position, sprite, ...args);\r\n\r\n  entity.on('position-changed', binder.synchronizeSprite.bind(binder));\r\n\r\n  return binder;\r\n});\r\n","import { component } from 'geotic';\r\nimport { app } from './../app';\r\n\r\nclass Position {\r\n  constructor(entity, x = 0, y = 0) {\r\n    this.entity = entity;\r\n    this._x = x;\r\n    this._y = y;\r\n  }\r\n\r\n  get compacted() {\r\n    return {\r\n      x: this._x,\r\n      y: this._y,\r\n    };\r\n  }\r\n\r\n  set x(newX) {\r\n    const oldPosition = this.compacted;\r\n    this._x = newX;\r\n    const newPosition = this.compacted;\r\n    this.entity.emit('position-changed', oldPosition, newPosition);\r\n  }\r\n\r\n  set y(newY) {\r\n    const oldPosition = this.compacted;\r\n    this._y = newY;\r\n    const newPosition = this.compacted;\r\n    this.entity.emit('position-changed', oldPosition, newPosition);\r\n  }\r\n\r\n  get x() { return this._x; }\r\n  get y() { return this._y; }\r\n\r\n  get worldX() {\r\n    return this._x * app.constants.TILE_SIZE;\r\n  }\r\n\r\n  get worldY() {\r\n    return this._y * app.constants.TILE_SIZE;\r\n  }\r\n}\r\n\r\ncomponent('position', (entity, x = 0, y = 0) => new Position(entity, x, y));\r\n","import { component } from 'geotic';\r\nimport { app } from './../app';\r\n\r\nclass Renderable {\r\n  constructor(subject) {\r\n    this.subject = subject;\r\n  }\r\n\r\n  render(canvas) {\r\n    return canvas.add(this.subject);\r\n  }\r\n}\r\n\r\ncomponent('renderable', (entity, subject) => {\r\n  const r = new Renderable(subject);\r\n  entity.render = r.render.bind(r);\r\n  return r;\r\n});\r\n","import { component } from 'geotic';\r\nimport { app } from './../app';\r\n\r\nclass Spawnable {\r\n  constructor(entity, test) {\r\n    this.entity = entity;\r\n    this.test = test;\r\n    this.entity.spawn = this.spawn.bind(this);\r\n    this.entity.canSpawnAt = this.canSpawnAt.bind(this);\r\n  }\r\n\r\n  canSpawnAt(x, y) {\r\n    return this.test(x, y);\r\n  }\r\n\r\n  spawn() {\r\n    this.entity.emit('spawn');\r\n    return this.entity;\r\n  }\r\n}\r\n\r\ncomponent('spawnable', (entity, test = () => {}) => new Spawnable(entity, test));\r\n","import { component } from 'geotic';\r\nimport { app } from './../app';\r\n\r\ncomponent('sprite', (entity, ...args) => {\r\n  let x, y = 0;\r\n  let key, frame = null;\r\n\r\n  switch(args.length) {\r\n    case 0:\r\n      break;\r\n    case 1:\r\n      key = args[0];\r\n      break;\r\n    case 2:\r\n      key = args[0];\r\n      frame = args[1];\r\n      break;\r\n    case 3:\r\n      x = args[0];\r\n      y = args[1];\r\n      key = args[2];\r\n      break;\r\n    case 4:\r\n      x = args[0];\r\n      y = args[1];\r\n      key = args[2];\r\n      frame = args[3];\r\n      break;\r\n  }\r\n\r\n  const sprite = new Phaser.Sprite(app.game, x, y, key, frame);\r\n  sprite.unmount = (e) => {\r\n    sprite.destroy();\r\n  };\r\n\r\n  entity.mandate('renderable', sprite);\r\n  return sprite;\r\n});\r\n","import entities from './index';\r\n\r\nexport default class EntityFactory {\r\n  tower(x, y) {\r\n    return entities.tower(x, y);\r\n  }\r\n  shrub(x, y) {\r\n    return entities.shrub(x, y);\r\n  }\r\n  pineTree(x, y) {\r\n    return entities.pineTree(x, y);\r\n  }\r\n  fox(x, y) {\r\n    return entities.fox(x, y);\r\n  }\r\n}\r\n","import { entity } from 'geotic';\r\nimport geotic from 'geotic';\r\nimport app from '../app';\r\n\r\nexport default (x, y) => {\r\n  const fox = entity()\r\n    .add('position', x, y)\r\n    .add('sprite', 'fox')\r\n    .add('position-bound-sprite')\r\n    .add('spawnable', (x, y) => {\r\n      return geotic\r\n        .findByComponent('bounds')\r\n        .every(e => !fox.bounds.collidesWith(e.bounds));\r\n    })\r\n    .add('bounds')\r\n    .add('agent', dt => {\r\n      fox.position.x = fox.position.x - dt * .001;\r\n      if (fox.position.x <= - fox.bounds.width) {\r\n        fox.position.x = app.constants.MAP_WIDTH;\r\n      }\r\n    })\r\n    .once('spawn', () => {\r\n      fox.render(app.map.static);\r\n      app.map.static.sort('y');\r\n      console.log('fox spawned.');\r\n    });\r\n\r\n  return fox;\r\n};\r\n","import tower from './tower';\nimport shrub from './shrub';\nimport fox from './fox';\nimport pineTree from './pine-tree';\n\nexport { tower };\nexport { shrub };\nexport { pineTree };\nexport { fox };\nexport default { tower, shrub, pineTree, fox };\n","import { entity } from 'geotic';\r\nimport geotic from 'geotic';\r\nimport app from '../app';\r\n\r\nexport default (x, y) => {\r\n  const tree = entity()\r\n    .add('position', x, y)\r\n    .add('sprite', 'pine-tree')\r\n    .add('position-bound-sprite', 0, -16)\r\n    .add('spawnable', (x, y) => {\r\n      return geotic\r\n        .findByComponent('bounds')\r\n        .every(e => !tree.bounds.collidesWith(e.bounds));\r\n    })\r\n    .add('bounds')\r\n    .once('spawn', () => {\r\n      tree.render(app.map.static);\r\n      app.map.static.sort('y');\r\n      console.log('tree spawned.');\r\n    });\r\n\r\n  return tree;\r\n};\r\n","import { entity } from 'geotic';\r\nimport app from '../app';\r\n\r\nexport default (x, y) => {\r\n  const shrub = entity()\r\n    .add('sprite', app.worldX(x), app.worldY(y), 32, 32, 'shrub')\r\n    .add('spawnable')\r\n    .on('spawn', () => shrub.render(app.map.static));\r\n\r\n  return shrub;\r\n};\r\n","import { entity } from 'geotic';\r\nimport app from '../app';\r\n\r\nexport default (x, y) => {\r\n  const tower = entity()\r\n    .add('sprite', app.worldX(x), app.worldY(y) - 16, 16, 32, 'tower')\r\n    .add('spawnable');\r\n    // .on('spawn', () => tower.render(app.map.walls));\r\n\r\n  return tower;\r\n};\r\n","export default class CommandQueue {\r\n  constructor(commands = []) {\r\n    this.commands = [];\r\n    commands.forEach(c => this.push(c));\r\n  }\r\n\r\n  process() {\r\n    if (this.commands.length) {\r\n      const command = this.commands.shift();\r\n      command.execute();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  processAll() {\r\n    this.process() && this.processAll();\r\n  }\r\n\r\n  push(command) {\r\n    this.commands.push(command);\r\n  }\r\n}\r\n","export default class Command {\r\n  execute() {\r\n  }\r\n}\r\n","import Command from './command';\r\n\r\nexport default class SpawnEntityCommand extends Command {\r\n  constructor(entity) {\r\n    super();\r\n    this.entity = entity;\r\n  }\r\n\r\n  execute() {\r\n    this.entity.spawn();\r\n  }\r\n}\r\n","export default class InputController {\r\n  constructor(queue) {\r\n    this.queue = queue;\r\n  }\r\n\r\n  handle() {\r\n  }\r\n\r\n  queueCommand(command) {\r\n    this.queue.push(command);\r\n  }\r\n}\r\n","import SpawnEntityCommand from '../commands/spawn-entity-command';\r\nimport InputController from './input-controller';\r\nimport app from '../../app';\r\n\r\nexport default class MapInputController extends InputController {\r\n  constructor() {\r\n    super(app.commandQueue);\r\n    this.cursor = app.cursor;\r\n    this.oldMouseX = 0;\r\n    this.oldMouseY = 0;\r\n  }\r\n\r\n  handle() {\r\n    this.mouseX = app.input.activePointer.worldX;\r\n    this.mouseY = app.input.activePointer.worldY;\r\n    this.tileX = app.tileX(this.mouseX);\r\n    this.tileY = app.tileY(this.mouseY);\r\n\r\n    if (this.leftMouseButtonDown) {\r\n      // const pine = app.create.pineTree(this.tileX, this.tileY);\r\n      const fox = app.create.fox(this.tileX, this.tileY);\r\n\r\n      if (fox.canSpawnAt(this.tileX, this.tileY)) {\r\n        const command = new SpawnEntityCommand(fox);\r\n        this.queueCommand(command);\r\n      } else {\r\n        fox.destroy();\r\n      }\r\n    }\r\n\r\n    if (this.rightMouseButtonDown) {\r\n      console.log('rmb');\r\n    }\r\n\r\n    this.oldMouseX = this.mouseX;\r\n    this.oldMouseY = this.mouseY;\r\n  }\r\n\r\n  get mousePositionChanged() {\r\n    return this.oldMouseX != this.mouseX || this.oldMouseY != this.mouseY;\r\n  }\r\n\r\n  get leftMouseButtonDown() {\r\n    return app.input.mousePointer.leftButton.isDown\r\n  }\r\n\r\n  get rightMouseButtonDown() {\r\n    return app.input.mousePointer.rightButton.isDown\r\n  }\r\n}\r\n","import Tile from './tile';\r\n\r\nPhaser.Tile = Tile;\r\n","export default class Tile extends Phaser.Tile {\r\n  /**\r\n   * Get binary sum of all neighbors.\r\n   */\r\n  binarySum(test) {\r\n    let sum = 0;\r\n    let multiplier = 256;\r\n\r\n    for (let i = -1; i <= 1; i++) {\r\n      const y = this.y - i;\r\n      const row = this.layer.data[y];\r\n\r\n      for (let j = -1; j <= 1; j++) {\r\n        if (i === 0 && j === 0) continue;\r\n        const x = this.x - j;\r\n        const tile = row && x in row ? row[x] : null;\r\n\r\n        if (test(tile)) sum += multiplier;\r\n\r\n        multiplier /= 2;\r\n      }\r\n    }\r\n\r\n    return sum;\r\n  }\r\n\r\n  /**\r\n   * Get binary sum of neighbors only taking into account\r\n   * the top, left, right, and bottom tiles.\r\n   */\r\n  binarySumSimple(test) {\r\n    let sum = 0;\r\n\r\n    const getNeighbor = (x, y) => {\r\n      if (y in this.layer.data) {\r\n        if (x in this.layer.data[y]) return this.layer.data[x][y];\r\n      }\r\n      return null;\r\n    };\r\n\r\n    const top = getNeighbor(this.y - 1, this.x);\r\n    const left = getNeighbor(this.y, this.x - 1);\r\n    const right = getNeighbor(this.y, this.x + 1);\r\n    const bottom = getNeighbor(this.y + 1, this.x);\r\n\r\n    if (test(top)) sum += 4;\r\n    if (test(left)) sum += 16;\r\n    if (test(right)) sum += 32;\r\n    if (test(bottom)) sum += 128;\r\n\r\n    return sum;\r\n  }\r\n\r\n  /**\r\n   * Boolean check if this tile exists on the layer boundary\r\n   */\r\n  atBoundary() {\r\n    return this.x === 0\r\n      || this.y === 0\r\n      || this.x === this.layer.width - 1\r\n      || this.y === this.layer.height - 1;\r\n  }\r\n}\r\n","import app from '../app';\r\n\r\nexport default class Map {\r\n  constructor(level) {\r\n    this.tilemap = app.game.add.tilemap(level);\r\n    this.tilemap.addTilesetImage('terrain', 'terrain');\r\n\r\n    this.background = this.tilemap.createLayer('background');\n\n    this.static = app.game.add.group();\r\n  }\r\n}\r\n","import app from '../app';\r\nimport entities from '../entities';\r\n\r\nexport default class Game extends Phaser.State {\r\n  create() {\r\n    app.init(this.game);\r\n\r\n    app.create.pineTree(8, 4).spawn();\r\n    app.create.pineTree(6, 5).spawn();\r\n    app.create.fox(14, 6).spawn();\r\n  }\r\n\r\n  update() {\r\n    app.update();\r\n  }\r\n};\r\n","export default class Loading extends Phaser.State {\r\n  preload() {\r\n    this.game.stage.smoothed = false;\r\n    this.loadingBar = this.game.add.sprite(this.game.world.centerX, this.game.world.centerY + 128, 'loading-bar');\r\n    this.loadingBar.anchor.setTo(0.5);\r\n    this.load.setPreloadSprite(this.loadingBar);\r\n\r\n    this.load.image('ground', 'img/ground.png');\r\n    this.load.image('terrain', 'img/terrain-16.png');\r\n    this.load.image('wall', 'img/walls.png');\r\n    this.load.image('tower', 'img/tower.png');\r\n    this.load.image('flag', 'img/flag.png');\r\n    this.load.image('shrub', 'img/shrub.png');\r\n    this.load.image('pine-tree', 'img/pine-tree.png');\r\n    this.load.image('fox', 'img/fox.png');\r\n\r\n    this.load.tilemap('island', 'maps/island.json', null, Phaser.Tilemap.TILED_JSON);\r\n    this.load.tilemap('crazytown', 'maps/crazytown.json', null, Phaser.Tilemap.TILED_JSON);\r\n    this.load.tilemap('tiny', 'maps/tiny.json', null, Phaser.Tilemap.TILED_JSON);\r\n    this.load.tilemap('paradise', 'maps/paradise.json', null, Phaser.Tilemap.TILED_JSON);\r\n\r\n    this.load.spritesheet('cursor', 'img/cursor.png', 16, 16);\r\n    this.load.atlas('walls', 'img/walls.png', 'atlas/walls.json');\r\n    this.load.atlas('interior', 'img/interior-orange.png', 'atlas/interior.json');\r\n  }\r\n\r\n  create() {\r\n    this.game.stage.smoothed = false;\r\n    this.stage.backgroundColor = '#306082';\r\n    this.state.start('Game');\r\n  }\r\n};\r\n","export default class Preload extends Phaser.State {\r\n  preload() {\r\n    this.game.load.image('loading-bar', 'img/loading-bar.png');\r\n  }\r\n\r\n  create() {\r\n    this.game.stage.backgroundColor = '#306082';\r\n    this.game.scale.scaleMode = Phaser.ScaleManager.USER_SCALE;\r\n    this.game.scale.setUserScale(2, 2);\r\n\r\n    this.game.renderer.renderSession.roundPixels = true;\r\n    Phaser.Canvas.setImageRenderingCrisp(this.game.canvas);\r\n\r\n    this.state.start('Loading');\r\n  }\r\n};\r\n","import geotic from 'geotic';\r\nimport app from '../app';\r\n\r\nexport default class AgentSystem {\r\n  constructor() {\r\n  }\r\n\r\n  update(dt) {\r\n    const actors = geotic.findByComponent('agent');\r\n\r\n    actors.forEach(actor => {\r\n      actor.agent.update(dt);\r\n    });\r\n  }\r\n}\r\n","import geotic from 'geotic';\r\nimport app from '../app';\r\n\r\nexport default class BoundsSystem {\r\n  constructor() {\r\n    this.debug = false;\r\n  }\r\n\r\n  update() {\r\n    const actors = geotic.findByComponent('bounds');\r\n\r\n    if (this.debug) {\r\n      actors.forEach(actor => {\r\n        actor.bounds.debug();\r\n      });\r\n    } else {\r\n      app.game.debug.reset();\r\n    }\r\n  }\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZ2VvdGljL2J1aWxkL2dlb3RpYy5qcyIsInNyY1xcYXBwLmpzIiwic3JjXFxib290LmpzIiwic3JjXFxjb21wb25lbnRzXFxhZ2VudC5qcyIsInNyY1xcY29tcG9uZW50c1xcYm91bmRzLmpzIiwic3JjXFxjb21wb25lbnRzXFxpbmRleC5qcyIsInNyY1xcY29tcG9uZW50c1xccG9zaXRpb24tYm91bmQtc3ByaXRlLmpzIiwic3JjXFxjb21wb25lbnRzXFxwb3NpdGlvbi5qcyIsInNyY1xcY29tcG9uZW50c1xccmVuZGVyYWJsZS5qcyIsInNyY1xcY29tcG9uZW50c1xcc3Bhd25hYmxlLmpzIiwic3JjXFxjb21wb25lbnRzXFxzcHJpdGUuanMiLCJzcmNcXGVudGl0aWVzXFxlbnRpdHktZmFjdG9yeS5qcyIsInNyY1xcZW50aXRpZXNcXGZveC5qcyIsInNyY1xcZW50aXRpZXNcXGluZGV4LmpzIiwic3JjXFxlbnRpdGllc1xccGluZS10cmVlLmpzIiwic3JjXFxlbnRpdGllc1xcc2hydWIuanMiLCJzcmNcXGVudGl0aWVzXFx0b3dlci5qcyIsInNyY1xcaW5wdXRcXGNvbW1hbmQtcXVldWUuanMiLCJzcmNcXGlucHV0XFxjb21tYW5kc1xcY29tbWFuZC5qcyIsInNyY1xcaW5wdXRcXGNvbW1hbmRzXFxzcGF3bi1lbnRpdHktY29tbWFuZC5qcyIsInNyY1xcaW5wdXRcXGNvbnRyb2xsZXJzXFxpbnB1dC1jb250cm9sbGVyLmpzIiwic3JjXFxpbnB1dFxcY29udHJvbGxlcnNcXG1hcC1pbnB1dC1jb250cm9sbGVyLmpzIiwic3JjXFxwaGFzZXJcXGJvb3RzdHJhcC5qcyIsInNyY1xccGhhc2VyXFx0aWxlLmpzIiwic3JjXFxwcmVmYWJzXFxtYXAuanMiLCJzcmNcXHN0YXRlc1xcZ2FtZS5qcyIsInNyY1xcc3RhdGVzXFxsb2FkaW5nLmpzIiwic3JjXFxzdGF0ZXNcXHByZWxvYWQuanMiLCJzcmNcXHN5c3RlbXNcXGFnZW50LXN5c3RlbS5qcyIsInNyY1xcc3lzdGVtc1xcYm91bmRzLXN5c3RlbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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bkI7QUFDRCxPQUZEO0FBR0Q7Ozs7OztrQkFWa0IsVzs7Ozs7Ozs7Ozs7QUNIckI7Ozs7QUFDQTs7Ozs7Ozs7SUFFcUIsWTtBQUNuQiwwQkFBYztBQUFBOztBQUNaLFNBQUssS0FBTCxHQUFhLEtBQWI7QUFDRDs7Ozs2QkFFUTtBQUNQLFVBQU0sU0FBUyxpQkFBTyxlQUFQLENBQXVCLFFBQXZCLENBQWY7O0FBRUEsVUFBSSxLQUFLLEtBQVQsRUFBZ0I7QUFDZCxlQUFPLE9BQVAsQ0FBZSxpQkFBUztBQUN0QixnQkFBTSxNQUFOLENBQWEsS0FBYjtBQUNELFNBRkQ7QUFHRCxPQUpELE1BSU87QUFDTCxzQkFBSSxJQUFKLENBQVMsS0FBVCxDQUFlLEtBQWY7QUFDRDtBQUNGOzs7Ozs7a0JBZmtCLFkiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIF9pZCA9IDA7XG52YXIgaWQgPSBmdW5jdGlvbiBpZCgpIHtcbiAgcmV0dXJuICsrX2lkO1xufTtcblxudmFyIGhhc2ggPSBmdW5jdGlvbiBoYXNoKG4pIHtcbiAgcmV0dXJuIG4uc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBhID4gYjtcbiAgfSkuam9pbignJCcpO1xufTtcbnZhciByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoYSwgdikge1xuICByZXR1cm4gYS5zcGxpY2UoYS5pbmRleE9mKHYpLCAxKTtcbn07XG52YXIgZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gZ2V0Q29tcG9uZW50KG4pIHtcbiAgcmV0dXJuIGNvbXBvbmVudHMuZ2V0KG4pIHx8IG5ld0NvbXBvbmVudChuKTtcbn07XG52YXIgY2xvbmUgPSBmdW5jdGlvbiBjbG9uZShvKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8pKTtcbn07XG52YXIgc2lncyA9IG5ldyBNYXAoKTtcbnZhciB0c2lncyA9IG5ldyBNYXAoKTtcbnZhciB0YWdzID0gbmV3IE1hcCgpO1xudmFyIGVudGl0aWVzID0gW107XG52YXIgY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcblxudmFyIFNpZ25hdHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2lnbmF0dXJlKG4pIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNpZ25hdHVyZSk7XG5cbiAgICB0aGlzLm5hID0gbjtcbiAgICB0aGlzLmVuID0gW107XG4gICAgZW50aXRpZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIF90aGlzLm9uQWRkKGUpO1xuICAgIH0pO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNpZ25hdHVyZSwgW3tcbiAgICBrZXk6ICdtYXRjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hdGNoKGUpIHtcbiAgICAgIHZhciBrID0gT2JqZWN0LmtleXMoZS5jb21wb25lbnRzKTtcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLm5hW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBuID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICBpZiAoIWsuaW5jbHVkZXMobikpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uQWRkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25BZGQoZSkge1xuICAgICAgaWYgKHRoaXMuZW4uaW5jbHVkZXMoZSkpIHJldHVybjtcbiAgICAgIHRoaXMubWF0Y2goZSkgJiYgdGhpcy5lbi5wdXNoKGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uUmVtJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZW0oZSwgYykge1xuICAgICAgdGhpcy5uYS5pbmNsdWRlcyhjKSAmJiByZW1vdmUodGhpcy5lbiwgZSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6ICdnZXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQobikge1xuICAgICAgdmFyIGggPSBoYXNoKG4pO1xuICAgICAgcmV0dXJuIHNpZ3MuaGFzKGgpID8gc2lncy5nZXQoaCkgOiBTaWduYXR1cmUubWFrZShuLCBoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdtYWtlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWFrZShuLCBoKSB7XG4gICAgICB2YXIgdCA9IG5ldyBTaWduYXR1cmUobik7XG4gICAgICBzaWdzLnNldChoLCB0KTtcbiAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTaWduYXR1cmU7XG59KCk7XG5cbnZhciBUYWdTaWduYXR1cmUgPSBmdW5jdGlvbiAoX1NpZ25hdHVyZSkge1xuICBfaW5oZXJpdHMoVGFnU2lnbmF0dXJlLCBfU2lnbmF0dXJlKTtcblxuICBmdW5jdGlvbiBUYWdTaWduYXR1cmUoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRhZ1NpZ25hdHVyZSk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhZ1NpZ25hdHVyZSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVGFnU2lnbmF0dXJlLCBbe1xuICAgIGtleTogJ21hdGNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbWF0Y2goZSkge1xuICAgICAgdmFyIGsgPSBPYmplY3Qua2V5cyhlLnRhZ3MpO1xuICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLm5hW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIG4gPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICBpZiAoIWsuaW5jbHVkZXMobikpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmVuLnB1c2goZSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6ICdnZXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQobikge1xuICAgICAgdmFyIGggPSBoYXNoKG4pO1xuICAgICAgcmV0dXJuIHRzaWdzLmhhcyhoKSA/IHRzaWdzLmdldChoKSA6IFRhZ1NpZ25hdHVyZS5tYWtlKG4sIGgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ21ha2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYWtlKG4sIGgpIHtcbiAgICAgIHZhciB0ID0gbmV3IFRhZ1NpZ25hdHVyZShuKTtcbiAgICAgIHRzaWdzLnNldChoLCB0KTtcbiAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUYWdTaWduYXR1cmU7XG59KFNpZ25hdHVyZSk7XG5cbnZhciByZXNlcnZlID0gWydpZCcsICdsaXN0ZW5lcnMnLCAnc2VyaWFsaXplJywgJ2Rlc2VyaWFsaXplJywgJ2FkZCcsICdyZW1vdmUnLCAnaGFzJywgJ2Rlc3Ryb3knLCAndGFnJywgJ3RhZ3MnLCAndW50YWcnLCAnY29tcG9uZW50cycsICdvbicsICdvZmYnLCAnb25jZScsICdlbWl0J107XG5cbnZhciBFbnRpdHkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEVudGl0eShpZCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbnRpdHkpO1xuXG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMudGFncyA9IHt9O1xuICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEVudGl0eSwgW3tcbiAgICBrZXk6ICdzZXJpYWxpemUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXJpYWxpemUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgIHRhZ3M6IE9iamVjdC5rZXlzKHRoaXMudCksXG4gICAgICAgIGNvbXBvbmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcyA9IFtdO1xuICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMyA9IGZhbHNlO1xuICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IE9iamVjdC5rZXlzKF90aGlzMy5jb21wb25lbnRzKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge1xuICAgICAgICAgICAgICB2YXIgbiA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICBzLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG4sXG4gICAgICAgICAgICAgICAgdmFsdWU6IF90aGlzM1tuXS5zZXJpYWxpemUgPyBfdGhpczNbbl0uc2VyaWFsaXplKCkgOiBjbG9uZShfdGhpczNbbl0pXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSgpXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2FkZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChuKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYSA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYVtfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIGF0dGFjaFRvKHRoaXMsIG4sIGdldENvbXBvbmVudChuKS5hcHBseSh1bmRlZmluZWQsIFt0aGlzXS5jb25jYXQoYSkpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbW92ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShuKSB7XG4gICAgICB2YXIgX24sXG4gICAgICAgICAgX3RoaXM0ID0gdGhpcztcblxuICAgICAgaWYgKCF0aGlzW25dKSByZXR1cm47XG5cbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYSA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYVtfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgdGhpc1tuXS51bm1vdW50ICYmIChfbiA9IHRoaXNbbl0pLnVubW91bnQuYXBwbHkoX24sIFt0aGlzXS5jb25jYXQoYSkpO1xuICAgICAgZGVsZXRlIHRoaXNbbl07XG4gICAgICBzaWdzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIHQub25SZW0oX3RoaXM0LCBuKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbWFuZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hbmRhdGUobikge1xuICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhID0gQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICBhW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXNbbl0pIHRoaXMuYWRkLmFwcGx5KHRoaXMsIFtuXS5jb25jYXQoYSkpO1xuICAgICAgcmV0dXJuIHRoaXNbbl07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnaGFzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzKG4pIHtcbiAgICAgIHJldHVybiAhIXRoaXNbbl07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZGVzdHJveScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICBfZGVzdHJveSh0aGlzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd0YWcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0YWcobikge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHZhciBhID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cbiAgICAgIHZhciB0ID0gZ2V0VGFnKG4pO1xuICAgICAgT2JqZWN0LmFzc2lnbih0LCBhKTtcbiAgICAgIGlmIChuIGluIHRoaXMudGFncykgcmV0dXJuIHRoaXM7XG4gICAgICB0aGlzLnRhZ3Nbbl0gPSB0O1xuICAgICAgdHNpZ3MuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gdC5vbkFkZChfdGhpczUpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICd1bnRhZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVudGFnKG4pIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMudGFnc1tuXSkgcmV0dXJuO1xuICAgICAgZGVsZXRlIHRoaXMudGFnc1tuXTtcbiAgICAgIHRzaWdzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIHQub25SZW0oX3RoaXM2LCBuKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb24nLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbihlLCBmKSB7XG4gICAgICB0aGlzLmxpc3RlbmVycy5oYXMoZSkgfHwgdGhpcy5saXN0ZW5lcnMuc2V0KGUsIFtdKTtcbiAgICAgIHRoaXMubGlzdGVuZXJzLmdldChlKS5wdXNoKGYpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25jZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZSwgZikge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIGZuKCkge1xuICAgICAgICBfdGhpczcub2ZmKGUsIGYpO1xuICAgICAgICBmLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgICBmbi5fID0gZjtcbiAgICAgIHJldHVybiB0aGlzLm9uKGUsIGZuKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvZmYnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvZmYoZSwgZikge1xuICAgICAgdmFyIGxzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KGUpO1xuICAgICAgaWYgKGxzICYmIGxzLmxlbmd0aCkge1xuICAgICAgICBscy5mb3JFYWNoKGZ1bmN0aW9uIChsLCBpKSB7XG4gICAgICAgICAgaWYgKGwgPT09IGYgfHwgbC5fID09PSBmKSB7XG4gICAgICAgICAgICBscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgbHMubGVuZ3RoID8gdGhpcy5saXN0ZW5lcnMuc2V0KGUsIGxzKSA6IHRoaXMubGlzdGVuZXJzLmRlbGV0ZShlKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnZW1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXQoZSkge1xuICAgICAgZm9yICh2YXIgX2xlbjQgPSBhcmd1bWVudHMubGVuZ3RoLCBhID0gQXJyYXkoX2xlbjQgPiAxID8gX2xlbjQgLSAxIDogMCksIF9rZXk0ID0gMTsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICBhW19rZXk0IC0gMV0gPSBhcmd1bWVudHNbX2tleTRdO1xuICAgICAgfVxuXG4gICAgICB2YXIgbHMgPSB0aGlzLmxpc3RlbmVycy5nZXQoZSk7XG4gICAgICBpZiAobHMgJiYgbHMubGVuZ3RoKSB7XG4gICAgICAgIGxzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICByZXR1cm4gbC5hcHBseSh1bmRlZmluZWQsIGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudHMnLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIHZhciBjID0ge307XG4gICAgICBPYmplY3Qua2V5cyh0aGlzKS5maWx0ZXIoZnVuY3Rpb24gKGspIHtcbiAgICAgICAgcmV0dXJuICFyZXNlcnZlLmluY2x1ZGVzKGspO1xuICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gY1trXSA9IF90aGlzOFtrXTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6ICdkZXNlcmlhbGl6ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc2VyaWFsaXplKGQpIHtcbiAgICAgIHZhciBlID0gZW50aXR5KGQuaWQpO1xuICAgICAgZC50YWdzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIGUudGFnKHQpO1xuICAgICAgfSk7XG4gICAgICBkLmNvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICB2YXIgbSA9IGdldENvbXBvbmVudChjLm5hbWUpO1xuICAgICAgICBpZiAobS5kZXNlcmlhbGl6ZSkge1xuICAgICAgICAgIGF0dGFjaFRvKGUsIGMubmFtZSwgbS5kZXNlcmlhbGl6ZShlLCBjLnZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKF90eXBlb2YoYy52YWx1ZSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBhdHRhY2hUbyhlLCBjLm5hbWUsIGMudmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgaW5zID0gbShlKSB8fCB7fTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKGlucywgYy52YWx1ZSk7XG4gICAgICAgICAgYXR0YWNoVG8oZSwgYy5uYW1lLCBpbnMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRW50aXR5O1xufSgpO1xuXG52YXIgYXR0YWNoVG8gPSBmdW5jdGlvbiBhdHRhY2hUbyhlLCBuLCBjKSB7XG4gIGVbbl0gPSBjO1xuICBjLm1vdW50ICYmIGMubW91bnQoZSk7XG4gIHNpZ3MuZm9yRWFjaChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiBzLm9uQWRkKGUpO1xuICB9KTtcbn07XG5cbnZhciBuZXdDb21wb25lbnQgPSBmdW5jdGlvbiBuZXdDb21wb25lbnQobikge1xuICB2YXIgYyA9IGZ1bmN0aW9uIGMoZW50aXR5KSB7fTtcbiAgY29tcG9uZW50cy5zZXQobiwgYyk7XG4gIHJldHVybiBjO1xufTtcblxudmFyIG5ld1RhZyA9IGZ1bmN0aW9uIG5ld1RhZyhuKSB7XG4gIHZhciB0ID0ge307XG4gIHRhZ3Muc2V0KG4sIHQpO1xuICByZXR1cm4gdDtcbn07XG5cbnZhciBzelRhZ3MgPSBmdW5jdGlvbiBzelRhZ3MoKSB7XG4gIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRhZ3MpKS5tYXAoZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdlswXSxcbiAgICAgIHZhbHVlOiB2WzFdLnNlcmlhbGl6ZSA/IHZbMV0uc2VyaWFsaXplKCkgOiBjbG9uZSh2WzFdKVxuICAgIH07XG4gIH0pO1xufTtcblxudmFyIHN6RW50cyA9IGZ1bmN0aW9uIHN6RW50cygpIHtcbiAgcmV0dXJuIGVudGl0aWVzLm1hcChmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBlLnNlcmlhbGl6ZSgpO1xuICB9KTtcbn07XG52YXIgZ2V0VGFnID0gZXhwb3J0cy5nZXRUYWcgPSBmdW5jdGlvbiBnZXRUYWcobikge1xuICByZXR1cm4gdGFncy5nZXQobikgfHwgbmV3VGFnKG4pO1xufTtcbnZhciBjb21wb25lbnQgPSBleHBvcnRzLmNvbXBvbmVudCA9IGZ1bmN0aW9uIGNvbXBvbmVudChuLCBkKSB7XG4gIGlmIChyZXNlcnZlLmluY2x1ZGVzKG4pKSB0aHJvdyAnQ2Fubm90IHVzZSBhIHJlc2VydmVkIGtleXdvcmQgYXMgYSBjb21wb25lbnQnO1xuICBjb21wb25lbnRzLnNldChuLCBkKTtcbn07XG52YXIgZmluZEJ5Q29tcG9uZW50ID0gZXhwb3J0cy5maW5kQnlDb21wb25lbnQgPSBmdW5jdGlvbiBmaW5kQnlDb21wb25lbnQoKSB7XG4gIGZvciAodmFyIF9sZW41ID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG4gICAgbltfa2V5NV0gPSBhcmd1bWVudHNbX2tleTVdO1xuICB9XG5cbiAgcmV0dXJuIFNpZ25hdHVyZS5nZXQobikuZW47XG59O1xudmFyIGZpbmRCeVRhZyA9IGV4cG9ydHMuZmluZEJ5VGFnID0gZnVuY3Rpb24gZmluZEJ5VGFnKCkge1xuICBmb3IgKHZhciBfbGVuNiA9IGFyZ3VtZW50cy5sZW5ndGgsIG4gPSBBcnJheShfbGVuNiksIF9rZXk2ID0gMDsgX2tleTYgPCBfbGVuNjsgX2tleTYrKykge1xuICAgIG5bX2tleTZdID0gYXJndW1lbnRzW19rZXk2XTtcbiAgfVxuXG4gIHJldHVybiBUYWdTaWduYXR1cmUuZ2V0KG4pLmVuO1xufTtcbnZhciBmaW5kQnlJZCA9IGV4cG9ydHMuZmluZEJ5SWQgPSBmdW5jdGlvbiBmaW5kQnlJZChpZCkge1xuICByZXR1cm4gZW50aXRpZXMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBlLmlkID09PSBpZDtcbiAgfSk7XG59O1xudmFyIHNlcmlhbGl6ZSA9IGV4cG9ydHMuc2VyaWFsaXplID0gZnVuY3Rpb24gc2VyaWFsaXplKCkge1xuICByZXR1cm4geyB0YWdzOiBzelRhZ3MoKSwgZW50aXRpZXM6IHN6RW50cygpIH07XG59O1xudmFyIGVudGl0eSA9IGV4cG9ydHMuZW50aXR5ID0gZnVuY3Rpb24gZW50aXR5KCkge1xuICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYXJndW1lbnRzWzBdO1xuXG4gIHZhciBlID0gbmV3IEVudGl0eShpIHx8IGlkKCkpO1xuICBlbnRpdGllcy5wdXNoKGUpO1xuICBzaWdzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gdC5tYXRjaChlKTtcbiAgfSk7XG4gIHJldHVybiBlO1xufTtcblxudmFyIGRlc2VyaWFsaXplID0gZXhwb3J0cy5kZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uIGRlc2VyaWFsaXplKGRhdGEpIHtcbiAgZGF0YS50YWdzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihnZXRUYWcodC5uYW1lKSwgdC52YWx1ZSk7XG4gIH0pO1xuICBkYXRhLmVudGl0aWVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gRW50aXR5LmRlc2VyaWFsaXplKGUpO1xuICB9KTtcbn07XG5cbnZhciBfZGVzdHJveSA9IGZ1bmN0aW9uIF9kZXN0cm95KGUpIHtcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IE9iamVjdC5rZXlzKGUuY29tcG9uZW50cylbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcbiAgICAgIHZhciBuID0gX3N0ZXA0LnZhbHVlO1xuICAgICAgZS5yZW1vdmUobik7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3I0LnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3I1ID0gT2JqZWN0LmtleXMoZS50YWdzKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IChfc3RlcDUgPSBfaXRlcmF0b3I1Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZSkge1xuICAgICAgdmFyIHQgPSBfc3RlcDUudmFsdWU7XG4gICAgICBlLnVudGFnKHQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvcjUgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgJiYgX2l0ZXJhdG9yNS5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yNS5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlKGVudGl0aWVzLCBlKTtcbn07XG5cbmV4cG9ydHMuZGVzdHJveSA9IF9kZXN0cm95O1xudmFyIGNsZWFyID0gZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICBlbnRpdGllcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGUuZGVzdHJveSgpO1xuICB9KTtcbiAgc2lncyA9IG5ldyBNYXAoKTtcbiAgdHNpZ3MgPSBuZXcgTWFwKCk7XG4gIHRhZ3MgPSBuZXcgTWFwKCk7XG4gIGVudGl0aWVzID0gW107XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSB7XG4gIGNsZWFyOiBjbGVhcixcbiAgZW50aXR5OiBlbnRpdHksXG4gIGdldFRhZzogZ2V0VGFnLFxuICBkZXN0cm95OiBfZGVzdHJveSxcbiAgZmluZEJ5SWQ6IGZpbmRCeUlkLFxuICBmaW5kQnlUYWc6IGZpbmRCeVRhZyxcbiAgc2VyaWFsaXplOiBzZXJpYWxpemUsXG4gIGRlc2VyaWFsaXplOiBkZXNlcmlhbGl6ZSxcbiAgY29tcG9uZW50OiBjb21wb25lbnQsXG4gIGZpbmRCeUNvbXBvbmVudDogZmluZEJ5Q29tcG9uZW50XG59OyIsImltcG9ydCBFbnRpdHlGYWN0b3J5IGZyb20gJy4vZW50aXRpZXMvZW50aXR5LWZhY3RvcnknO1xyXG5pbXBvcnQgQ29tbWFuZFF1ZXVlIGZyb20gJy4vaW5wdXQvY29tbWFuZC1xdWV1ZSc7XHJcbmltcG9ydCBNYXBJbnB1dENvbnRyb2xsZXIgZnJvbSAnLi9pbnB1dC9jb250cm9sbGVycy9tYXAtaW5wdXQtY29udHJvbGxlcic7XHJcbmltcG9ydCBNYXAgZnJvbSAnLi9wcmVmYWJzL21hcCc7XHJcbmltcG9ydCBCb3VuZFN5c3RlbSBmcm9tICcuL3N5c3RlbXMvYm91bmRzLXN5c3RlbSc7XHJcbmltcG9ydCBBZ2VudFN5c3RlbSBmcm9tICcuL3N5c3RlbXMvYWdlbnQtc3lzdGVtJztcclxuXHJcbmNsYXNzIEFwcCB7XHJcbiAgaW5pdChnYW1lKSB7XHJcbiAgICB0aGlzLmdhbWUgPSBnYW1lO1xyXG4gICAgdGhpcy5pbnB1dCA9IHRoaXMuZ2FtZS5pbnB1dDtcclxuICAgIHRoaXMuY3JlYXRlID0gbmV3IEVudGl0eUZhY3Rvcnk7XHJcbiAgICB0aGlzLm1hcCA9IG5ldyBNYXAoJ3BhcmFkaXNlJyk7XHJcbiAgICB0aGlzLmNvbW1hbmRRdWV1ZSA9IG5ldyBDb21tYW5kUXVldWUoKTtcclxuICAgIHRoaXMuaW5wdXRDb250cm9sbGVyID0gbmV3IE1hcElucHV0Q29udHJvbGxlcigpO1xyXG4gICAgdGhpcy5zeXN0ZW1zID0ge1xyXG4gICAgICBib3VuZHM6IG5ldyBCb3VuZFN5c3RlbSxcclxuICAgICAgYWdlbnRzOiBuZXcgQWdlbnRTeXN0ZW0sXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHRoaXMuc3lzdGVtcy5ib3VuZHMuZGVidWcgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbnN0YW50cygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICdUSUxFX1NJWkUnOiAxNixcclxuICAgICAgJ01BUF9XSURUSCc6IDE2LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHdvcmxkWCh4KSB7XHJcbiAgICByZXR1cm4geCAqIHRoaXMuY29uc3RhbnRzLlRJTEVfU0laRTtcclxuICB9XHJcblxyXG4gIHdvcmxkWSh5KSB7XHJcbiAgICByZXR1cm4geSAqIHRoaXMuY29uc3RhbnRzLlRJTEVfU0laRTtcclxuICB9XHJcblxyXG4gIHRpbGVYKHdvcmxkWCkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3Iod29ybGRYIC8gdGhpcy5jb25zdGFudHMuVElMRV9TSVpFKTtcclxuICB9XHJcblxyXG4gIHRpbGVZKHdvcmxkWSkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3Iod29ybGRZIC8gdGhpcy5jb25zdGFudHMuVElMRV9TSVpFKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIHRoaXMuaW5wdXRDb250cm9sbGVyLmhhbmRsZSgpO1xyXG4gICAgdGhpcy5jb21tYW5kUXVldWUucHJvY2Vzc0FsbCgpO1xyXG4gICAgdGhpcy5zeXN0ZW1zLmJvdW5kcy51cGRhdGUoKTtcclxuICAgIHRoaXMuc3lzdGVtcy5hZ2VudHMudXBkYXRlKHRoaXMuZ2FtZS50aW1lLmVsYXBzZWRNUyk7XHJcbiAgfVxyXG59O1xyXG5cclxubGV0IGFwcCA9IG5ldyBBcHA7XHJcblxyXG5leHBvcnQgeyBhcHAgfTtcclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG4iLCJpbXBvcnQgJy4vcGhhc2VyL2Jvb3RzdHJhcCc7XHJcbmltcG9ydCBQcmVsb2FkIGZyb20gJy4vc3RhdGVzL3ByZWxvYWQnO1xyXG5pbXBvcnQgTG9hZGluZyBmcm9tICcuL3N0YXRlcy9sb2FkaW5nJztcclxuaW1wb3J0IEdhbWUgZnJvbSAnLi9zdGF0ZXMvZ2FtZSc7XHJcbmltcG9ydCAnLi9jb21wb25lbnRzJztcclxuaW1wb3J0ICcuL2VudGl0aWVzJztcclxuXHJcbmNsYXNzIEJvb3QgZXh0ZW5kcyBQaGFzZXIuR2FtZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcigxNiAqIDE2LCAxNiAqIDE2LCBQaGFzZXIuQVVUTywgJ2dhbWUtY29udGFpbmVyJywgbnVsbCwgZmFsc2UsIGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLnN0YXRlLmFkZCgnUHJlbG9hZCcsIFByZWxvYWQpO1xyXG4gICAgdGhpcy5zdGF0ZS5hZGQoJ0xvYWRpbmcnLCBMb2FkaW5nKTtcclxuICAgIHRoaXMuc3RhdGUuYWRkKCdHYW1lJywgR2FtZSk7XHJcblxyXG4gICAgdGhpcy5zdGF0ZS5zdGFydCgnUHJlbG9hZCcpO1xyXG4gIH1cclxufTtcclxuXHJcbm5ldyBCb290O1xyXG4iLCJpbXBvcnQgeyBjb21wb25lbnQgfSBmcm9tICdnZW90aWMnO1xyXG5pbXBvcnQgeyBhcHAgfSBmcm9tICcuLy4uL2FwcCc7XHJcblxyXG5jbGFzcyBBZ2VudCB7XHJcbiAgY29uc3RydWN0b3IoYmVoYXZpb3IpIHtcclxuICAgIHRoaXMuYmVoYXZpb3IgPSBiZWhhdmlvcjtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkdCkge1xyXG4gICAgdGhpcy5iZWhhdmlvcihkdCk7XHJcbiAgfVxyXG59XHJcblxyXG5jb21wb25lbnQoJ2FnZW50JywgKGVudGl0eSwgYmVoYXZpb3IgPSAoZHQpID0+IHt9KSA9PiB7XHJcbiAgZW50aXR5Lm1hbmRhdGUoJ3Bvc2l0aW9uJyk7XHJcbiAgcmV0dXJuIG5ldyBBZ2VudChiZWhhdmlvcik7XHJcbn0pO1xyXG4iLCJpbXBvcnQgeyBjb21wb25lbnQgfSBmcm9tICdnZW90aWMnO1xyXG5pbXBvcnQgYXBwIGZyb20gJy4uL2FwcCc7XHJcblxyXG5jbGFzcyBCb3VuZHMge1xyXG4gIGNvbnN0cnVjdG9yKHBvc2l0aW9uLCB3aWR0aCA9IDEsIGhlaWdodCA9IDEsIG9mZnNldFggPSAwLCBvZmZzZXRZID0gMCkge1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLm9mZnNldFggPSBvZmZzZXRYO1xyXG4gICAgdGhpcy5vZmZzZXRZID0gb2Zmc2V0WTtcclxuICB9XHJcblxyXG4gIGdldCB3b3JsZFgoKSB7XHJcbiAgICByZXR1cm4gYXBwLndvcmxkWCh0aGlzLmxlZnRCb3VuZCk7XHJcbiAgfVxyXG5cclxuICBnZXQgd29ybGRZKCkge1xyXG4gICAgcmV0dXJuIGFwcC53b3JsZFkodGhpcy50b3BCb3VuZCk7XHJcbiAgfVxyXG5cclxuICBnZXQgd29ybGRXaWR0aCgpIHtcclxuICAgIHJldHVybiB0aGlzLndpZHRoICogYXBwLmNvbnN0YW50cy5USUxFX1NJWkU7XHJcbiAgfVxyXG5cclxuICBnZXQgd29ybGRIZWlnaHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oZWlnaHQgKiBhcHAuY29uc3RhbnRzLlRJTEVfU0laRTtcclxuICB9XHJcblxyXG4gIGdldCBsZWZ0Qm91bmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi54ICsgdGhpcy5vZmZzZXRYO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHJpZ2h0Qm91bmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi54ICsgdGhpcy53aWR0aCArIHRoaXMub2Zmc2V0WDtcclxuICB9XHJcblxyXG4gIGdldCB0b3BCb3VuZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLm9mZnNldFk7XHJcbiAgfVxyXG5cclxuICBnZXQgYm90dG9tQm91bmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi55ICsgdGhpcy5oZWlnaHQgKyB0aGlzLm9mZnNldFk7XHJcbiAgfVxyXG5cclxuICBjb250YWlucyh4LCB5KSB7XHJcbiAgICByZXR1cm4geCA+IHRoaXMubGVmdEJvdW5kXHJcbiAgICAgICYmIHggPCB0aGlzLnJpZ2h0Qm91bmRcclxuICAgICAgJiYgeSA+IHRoaXMudG9wQm91bmRcclxuICAgICAgJiYgeSA8IHRoaXMuYm90dG9tQm91bmQ7XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlc0xlZnQob3RoZXIpIHtcclxuICAgIHJldHVybiB0aGlzLmxlZnRCb3VuZCA8IG90aGVyLnJpZ2h0Qm91bmQgJiYgdGhpcy5sZWZ0Qm91bmQgPj0gb3RoZXIubGVmdEJvdW5kO1xyXG4gIH1cclxuXHJcbiAgY29sbGlkZXNSaWdodChvdGhlcikge1xyXG4gICAgcmV0dXJuIHRoaXMucmlnaHRCb3VuZCA+IG90aGVyLmxlZnRCb3VuZCAmJiB0aGlzLnJpZ2h0Qm91bmQgPD0gb3RoZXIucmlnaHRCb3VuZDtcclxuICB9XHJcblxyXG4gIGNvbGxpZGVzVG9wKG90aGVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy50b3BCb3VuZCA8IG90aGVyLmJvdHRvbUJvdW5kICYmIHRoaXMudG9wQm91bmQgPj0gb3RoZXIudG9wQm91bmQ7XHJcbiAgfVxyXG5cclxuICBjb2xsaWRlc0JvdHRvbShvdGhlcikge1xyXG4gICAgcmV0dXJuIHRoaXMuYm90dG9tQm91bmQgPiBvdGhlci50b3BCb3VuZCAmJiB0aGlzLmJvdHRvbUJvdW5kIDw9IG90aGVyLmJvdHRvbUJvdW5kO1xyXG4gIH1cclxuXHJcbiAgY29sbGlkZXNXaXRoKG90aGVyKSB7XHJcbiAgICByZXR1cm4gKG90aGVyICE9IHRoaXMpXHJcbiAgICAgICYmICh0aGlzLmNvbGxpZGVzTGVmdChvdGhlcikgfHwgdGhpcy5jb2xsaWRlc1JpZ2h0KG90aGVyKSlcclxuICAgICAgJiYgKHRoaXMuY29sbGlkZXNUb3Aob3RoZXIpIHx8IHRoaXMuY29sbGlkZXNCb3R0b20ob3RoZXIpKTtcclxuICB9XHJcblxyXG4gIGRlYnVnKCkge1xyXG4gICAgY29uc3QgcmVjdCA9IG5ldyBQaGFzZXIuUmVjdGFuZ2xlKFxyXG4gICAgICB0aGlzLndvcmxkWCxcclxuICAgICAgdGhpcy53b3JsZFksXHJcbiAgICAgIHRoaXMud29ybGRXaWR0aCxcclxuICAgICAgdGhpcy53b3JsZEhlaWdodFxyXG4gICAgKTtcclxuXHJcbiAgICBhcHAuZ2FtZS5kZWJ1Zy5yZWN0YW5nbGUocmVjdCwgJyNlMzAwZmYnLCBmYWxzZSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb21wb25lbnQoJ2JvdW5kcycsIChlbnRpdHksIC4uLmFyZ3MpID0+IHtcclxuICBjb25zdCBwb3NpdGlvbiA9IGVudGl0eS5tYW5kYXRlKCdwb3NpdGlvbicpO1xyXG4gIHJldHVybiBuZXcgQm91bmRzKHBvc2l0aW9uLCAuLi5hcmdzKTtcclxufSk7XHJcbiIsImV4cG9ydCB7IGRlZmF1bHQgYXMgc3ByaXRlIH0gZnJvbSAnLi9zcHJpdGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyByZW5kZXJhYmxlIH0gZnJvbSAnLi9yZW5kZXJhYmxlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgc3Bhd25hYmxlIH0gZnJvbSAnLi9zcGF3bmFibGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBwb3NpdGlvbiB9IGZyb20gJy4vcG9zaXRpb24nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBib3VuZHMgfSBmcm9tICcuL2JvdW5kcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGFnZW50IH0gZnJvbSAnLi9hZ2VudCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHBvc2l0aW9uQm91bmRTcHJpdGUgfSBmcm9tICcuL3Bvc2l0aW9uLWJvdW5kLXNwcml0ZSc7XG4iLCJpbXBvcnQgeyBjb21wb25lbnQgfSBmcm9tICdnZW90aWMnO1xyXG5pbXBvcnQgeyBhcHAgfSBmcm9tICcuLy4uL2FwcCc7XHJcblxyXG5jbGFzcyBQb3NpdGlvbkJvdW5kU3ByaXRlIHtcclxuICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgc3ByaXRlLCBvZmZzZXRYID0gMCwgb2Zmc2V0WSA9IDApIHtcclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgIHRoaXMuc3ByaXRlID0gc3ByaXRlO1xyXG4gICAgdGhpcy5vZmZzZXRYID0gb2Zmc2V0WDtcclxuICAgIHRoaXMub2Zmc2V0WSA9IG9mZnNldFk7XHJcbiAgICB0aGlzLnN5bmNocm9uaXplU3ByaXRlKClcclxuICB9XHJcblxyXG4gIHN5bmNocm9uaXplU3ByaXRlKCkge1xyXG4gICAgdGhpcy5zcHJpdGUueCA9IHRoaXMucG9zaXRpb24ud29ybGRYICsgdGhpcy5vZmZzZXRYO1xyXG4gICAgdGhpcy5zcHJpdGUueSA9IHRoaXMucG9zaXRpb24ud29ybGRZICsgdGhpcy5vZmZzZXRZO1xyXG4gIH1cclxufVxyXG5cclxuY29tcG9uZW50KCdwb3NpdGlvbi1ib3VuZC1zcHJpdGUnLCAoZW50aXR5LCAuLi5hcmdzKSA9PiB7XHJcbiAgY29uc3QgcG9zaXRpb24gPSBlbnRpdHkubWFuZGF0ZSgncG9zaXRpb24nKTtcclxuICBjb25zdCBzcHJpdGUgPSBlbnRpdHkubWFuZGF0ZSgnc3ByaXRlJyk7XHJcbiAgY29uc3QgYmluZGVyID0gbmV3IFBvc2l0aW9uQm91bmRTcHJpdGUocG9zaXRpb24sIHNwcml0ZSwgLi4uYXJncyk7XHJcblxyXG4gIGVudGl0eS5vbigncG9zaXRpb24tY2hhbmdlZCcsIGJpbmRlci5zeW5jaHJvbml6ZVNwcml0ZS5iaW5kKGJpbmRlcikpO1xyXG5cclxuICByZXR1cm4gYmluZGVyO1xyXG59KTtcclxuIiwiaW1wb3J0IHsgY29tcG9uZW50IH0gZnJvbSAnZ2VvdGljJztcclxuaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi8uLi9hcHAnO1xyXG5cclxuY2xhc3MgUG9zaXRpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGVudGl0eSwgeCA9IDAsIHkgPSAwKSB7XHJcbiAgICB0aGlzLmVudGl0eSA9IGVudGl0eTtcclxuICAgIHRoaXMuX3ggPSB4O1xyXG4gICAgdGhpcy5feSA9IHk7XHJcbiAgfVxyXG5cclxuICBnZXQgY29tcGFjdGVkKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogdGhpcy5feCxcclxuICAgICAgeTogdGhpcy5feSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXQgeChuZXdYKSB7XHJcbiAgICBjb25zdCBvbGRQb3NpdGlvbiA9IHRoaXMuY29tcGFjdGVkO1xyXG4gICAgdGhpcy5feCA9IG5ld1g7XHJcbiAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHRoaXMuY29tcGFjdGVkO1xyXG4gICAgdGhpcy5lbnRpdHkuZW1pdCgncG9zaXRpb24tY2hhbmdlZCcsIG9sZFBvc2l0aW9uLCBuZXdQb3NpdGlvbik7XHJcbiAgfVxyXG5cclxuICBzZXQgeShuZXdZKSB7XHJcbiAgICBjb25zdCBvbGRQb3NpdGlvbiA9IHRoaXMuY29tcGFjdGVkO1xyXG4gICAgdGhpcy5feSA9IG5ld1k7XHJcbiAgICBjb25zdCBuZXdQb3NpdGlvbiA9IHRoaXMuY29tcGFjdGVkO1xyXG4gICAgdGhpcy5lbnRpdHkuZW1pdCgncG9zaXRpb24tY2hhbmdlZCcsIG9sZFBvc2l0aW9uLCBuZXdQb3NpdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXQgeCgpIHsgcmV0dXJuIHRoaXMuX3g7IH1cclxuICBnZXQgeSgpIHsgcmV0dXJuIHRoaXMuX3k7IH1cclxuXHJcbiAgZ2V0IHdvcmxkWCgpIHtcclxuICAgIHJldHVybiB0aGlzLl94ICogYXBwLmNvbnN0YW50cy5USUxFX1NJWkU7XHJcbiAgfVxyXG5cclxuICBnZXQgd29ybGRZKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3kgKiBhcHAuY29uc3RhbnRzLlRJTEVfU0laRTtcclxuICB9XHJcbn1cclxuXHJcbmNvbXBvbmVudCgncG9zaXRpb24nLCAoZW50aXR5LCB4ID0gMCwgeSA9IDApID0+IG5ldyBQb3NpdGlvbihlbnRpdHksIHgsIHkpKTtcclxuIiwiaW1wb3J0IHsgY29tcG9uZW50IH0gZnJvbSAnZ2VvdGljJztcclxuaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi8uLi9hcHAnO1xyXG5cclxuY2xhc3MgUmVuZGVyYWJsZSB7XHJcbiAgY29uc3RydWN0b3Ioc3ViamVjdCkge1xyXG4gICAgdGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcclxuICB9XHJcblxyXG4gIHJlbmRlcihjYW52YXMpIHtcclxuICAgIHJldHVybiBjYW52YXMuYWRkKHRoaXMuc3ViamVjdCk7XHJcbiAgfVxyXG59XHJcblxyXG5jb21wb25lbnQoJ3JlbmRlcmFibGUnLCAoZW50aXR5LCBzdWJqZWN0KSA9PiB7XHJcbiAgY29uc3QgciA9IG5ldyBSZW5kZXJhYmxlKHN1YmplY3QpO1xyXG4gIGVudGl0eS5yZW5kZXIgPSByLnJlbmRlci5iaW5kKHIpO1xyXG4gIHJldHVybiByO1xyXG59KTtcclxuIiwiaW1wb3J0IHsgY29tcG9uZW50IH0gZnJvbSAnZ2VvdGljJztcclxuaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi8uLi9hcHAnO1xyXG5cclxuY2xhc3MgU3Bhd25hYmxlIHtcclxuICBjb25zdHJ1Y3RvcihlbnRpdHksIHRlc3QpIHtcclxuICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgdGhpcy50ZXN0ID0gdGVzdDtcclxuICAgIHRoaXMuZW50aXR5LnNwYXduID0gdGhpcy5zcGF3bi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5lbnRpdHkuY2FuU3Bhd25BdCA9IHRoaXMuY2FuU3Bhd25BdC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY2FuU3Bhd25BdCh4LCB5KSB7XHJcbiAgICByZXR1cm4gdGhpcy50ZXN0KHgsIHkpO1xyXG4gIH1cclxuXHJcbiAgc3Bhd24oKSB7XHJcbiAgICB0aGlzLmVudGl0eS5lbWl0KCdzcGF3bicpO1xyXG4gICAgcmV0dXJuIHRoaXMuZW50aXR5O1xyXG4gIH1cclxufVxyXG5cclxuY29tcG9uZW50KCdzcGF3bmFibGUnLCAoZW50aXR5LCB0ZXN0ID0gKCkgPT4ge30pID0+IG5ldyBTcGF3bmFibGUoZW50aXR5LCB0ZXN0KSk7XHJcbiIsImltcG9ydCB7IGNvbXBvbmVudCB9IGZyb20gJ2dlb3RpYyc7XHJcbmltcG9ydCB7IGFwcCB9IGZyb20gJy4vLi4vYXBwJztcclxuXHJcbmNvbXBvbmVudCgnc3ByaXRlJywgKGVudGl0eSwgLi4uYXJncykgPT4ge1xyXG4gIGxldCB4LCB5ID0gMDtcclxuICBsZXQga2V5LCBmcmFtZSA9IG51bGw7XHJcblxyXG4gIHN3aXRjaChhcmdzLmxlbmd0aCkge1xyXG4gICAgY2FzZSAwOlxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgMTpcclxuICAgICAga2V5ID0gYXJnc1swXTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDI6XHJcbiAgICAgIGtleSA9IGFyZ3NbMF07XHJcbiAgICAgIGZyYW1lID0gYXJnc1sxXTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDM6XHJcbiAgICAgIHggPSBhcmdzWzBdO1xyXG4gICAgICB5ID0gYXJnc1sxXTtcclxuICAgICAga2V5ID0gYXJnc1syXTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIDQ6XHJcbiAgICAgIHggPSBhcmdzWzBdO1xyXG4gICAgICB5ID0gYXJnc1sxXTtcclxuICAgICAga2V5ID0gYXJnc1syXTtcclxuICAgICAgZnJhbWUgPSBhcmdzWzNdO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcblxyXG4gIGNvbnN0IHNwcml0ZSA9IG5ldyBQaGFzZXIuU3ByaXRlKGFwcC5nYW1lLCB4LCB5LCBrZXksIGZyYW1lKTtcclxuICBzcHJpdGUudW5tb3VudCA9IChlKSA9PiB7XHJcbiAgICBzcHJpdGUuZGVzdHJveSgpO1xyXG4gIH07XHJcblxyXG4gIGVudGl0eS5tYW5kYXRlKCdyZW5kZXJhYmxlJywgc3ByaXRlKTtcclxuICByZXR1cm4gc3ByaXRlO1xyXG59KTtcclxuIiwiaW1wb3J0IGVudGl0aWVzIGZyb20gJy4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5RmFjdG9yeSB7XHJcbiAgdG93ZXIoeCwgeSkge1xyXG4gICAgcmV0dXJuIGVudGl0aWVzLnRvd2VyKHgsIHkpO1xyXG4gIH1cclxuICBzaHJ1Yih4LCB5KSB7XHJcbiAgICByZXR1cm4gZW50aXRpZXMuc2hydWIoeCwgeSk7XHJcbiAgfVxyXG4gIHBpbmVUcmVlKHgsIHkpIHtcclxuICAgIHJldHVybiBlbnRpdGllcy5waW5lVHJlZSh4LCB5KTtcclxuICB9XHJcbiAgZm94KHgsIHkpIHtcclxuICAgIHJldHVybiBlbnRpdGllcy5mb3goeCwgeSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGVudGl0eSB9IGZyb20gJ2dlb3RpYyc7XHJcbmltcG9ydCBnZW90aWMgZnJvbSAnZ2VvdGljJztcclxuaW1wb3J0IGFwcCBmcm9tICcuLi9hcHAnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKHgsIHkpID0+IHtcclxuICBjb25zdCBmb3ggPSBlbnRpdHkoKVxyXG4gICAgLmFkZCgncG9zaXRpb24nLCB4LCB5KVxyXG4gICAgLmFkZCgnc3ByaXRlJywgJ2ZveCcpXHJcbiAgICAuYWRkKCdwb3NpdGlvbi1ib3VuZC1zcHJpdGUnKVxyXG4gICAgLmFkZCgnc3Bhd25hYmxlJywgKHgsIHkpID0+IHtcclxuICAgICAgcmV0dXJuIGdlb3RpY1xyXG4gICAgICAgIC5maW5kQnlDb21wb25lbnQoJ2JvdW5kcycpXHJcbiAgICAgICAgLmV2ZXJ5KGUgPT4gIWZveC5ib3VuZHMuY29sbGlkZXNXaXRoKGUuYm91bmRzKSk7XHJcbiAgICB9KVxyXG4gICAgLmFkZCgnYm91bmRzJylcclxuICAgIC5hZGQoJ2FnZW50JywgZHQgPT4ge1xyXG4gICAgICBmb3gucG9zaXRpb24ueCA9IGZveC5wb3NpdGlvbi54IC0gZHQgKiAuMDAxO1xyXG4gICAgICBpZiAoZm94LnBvc2l0aW9uLnggPD0gLSBmb3guYm91bmRzLndpZHRoKSB7XHJcbiAgICAgICAgZm94LnBvc2l0aW9uLnggPSBhcHAuY29uc3RhbnRzLk1BUF9XSURUSDtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC5vbmNlKCdzcGF3bicsICgpID0+IHtcclxuICAgICAgZm94LnJlbmRlcihhcHAubWFwLnN0YXRpYyk7XHJcbiAgICAgIGFwcC5tYXAuc3RhdGljLnNvcnQoJ3knKTtcclxuICAgICAgY29uc29sZS5sb2coJ2ZveCBzcGF3bmVkLicpO1xyXG4gICAgfSk7XHJcblxyXG4gIHJldHVybiBmb3g7XHJcbn07XHJcbiIsImltcG9ydCB0b3dlciBmcm9tICcuL3Rvd2VyJztcbmltcG9ydCBzaHJ1YiBmcm9tICcuL3NocnViJztcbmltcG9ydCBmb3ggZnJvbSAnLi9mb3gnO1xuaW1wb3J0IHBpbmVUcmVlIGZyb20gJy4vcGluZS10cmVlJztcblxuZXhwb3J0IHsgdG93ZXIgfTtcbmV4cG9ydCB7IHNocnViIH07XG5leHBvcnQgeyBwaW5lVHJlZSB9O1xuZXhwb3J0IHsgZm94IH07XG5leHBvcnQgZGVmYXVsdCB7IHRvd2VyLCBzaHJ1YiwgcGluZVRyZWUsIGZveCB9O1xuIiwiaW1wb3J0IHsgZW50aXR5IH0gZnJvbSAnZ2VvdGljJztcclxuaW1wb3J0IGdlb3RpYyBmcm9tICdnZW90aWMnO1xyXG5pbXBvcnQgYXBwIGZyb20gJy4uL2FwcCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCAoeCwgeSkgPT4ge1xyXG4gIGNvbnN0IHRyZWUgPSBlbnRpdHkoKVxyXG4gICAgLmFkZCgncG9zaXRpb24nLCB4LCB5KVxyXG4gICAgLmFkZCgnc3ByaXRlJywgJ3BpbmUtdHJlZScpXHJcbiAgICAuYWRkKCdwb3NpdGlvbi1ib3VuZC1zcHJpdGUnLCAwLCAtMTYpXHJcbiAgICAuYWRkKCdzcGF3bmFibGUnLCAoeCwgeSkgPT4ge1xyXG4gICAgICByZXR1cm4gZ2VvdGljXHJcbiAgICAgICAgLmZpbmRCeUNvbXBvbmVudCgnYm91bmRzJylcclxuICAgICAgICAuZXZlcnkoZSA9PiAhdHJlZS5ib3VuZHMuY29sbGlkZXNXaXRoKGUuYm91bmRzKSk7XHJcbiAgICB9KVxyXG4gICAgLmFkZCgnYm91bmRzJylcclxuICAgIC5vbmNlKCdzcGF3bicsICgpID0+IHtcclxuICAgICAgdHJlZS5yZW5kZXIoYXBwLm1hcC5zdGF0aWMpO1xyXG4gICAgICBhcHAubWFwLnN0YXRpYy5zb3J0KCd5Jyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCd0cmVlIHNwYXduZWQuJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgcmV0dXJuIHRyZWU7XHJcbn07XHJcbiIsImltcG9ydCB7IGVudGl0eSB9IGZyb20gJ2dlb3RpYyc7XHJcbmltcG9ydCBhcHAgZnJvbSAnLi4vYXBwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0ICh4LCB5KSA9PiB7XHJcbiAgY29uc3Qgc2hydWIgPSBlbnRpdHkoKVxyXG4gICAgLmFkZCgnc3ByaXRlJywgYXBwLndvcmxkWCh4KSwgYXBwLndvcmxkWSh5KSwgMzIsIDMyLCAnc2hydWInKVxyXG4gICAgLmFkZCgnc3Bhd25hYmxlJylcclxuICAgIC5vbignc3Bhd24nLCAoKSA9PiBzaHJ1Yi5yZW5kZXIoYXBwLm1hcC5zdGF0aWMpKTtcclxuXHJcbiAgcmV0dXJuIHNocnViO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBlbnRpdHkgfSBmcm9tICdnZW90aWMnO1xyXG5pbXBvcnQgYXBwIGZyb20gJy4uL2FwcCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCAoeCwgeSkgPT4ge1xyXG4gIGNvbnN0IHRvd2VyID0gZW50aXR5KClcclxuICAgIC5hZGQoJ3Nwcml0ZScsIGFwcC53b3JsZFgoeCksIGFwcC53b3JsZFkoeSkgLSAxNiwgMTYsIDMyLCAndG93ZXInKVxyXG4gICAgLmFkZCgnc3Bhd25hYmxlJyk7XHJcbiAgICAvLyAub24oJ3NwYXduJywgKCkgPT4gdG93ZXIucmVuZGVyKGFwcC5tYXAud2FsbHMpKTtcclxuXHJcbiAgcmV0dXJuIHRvd2VyO1xyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21tYW5kUXVldWUge1xyXG4gIGNvbnN0cnVjdG9yKGNvbW1hbmRzID0gW10pIHtcclxuICAgIHRoaXMuY29tbWFuZHMgPSBbXTtcclxuICAgIGNvbW1hbmRzLmZvckVhY2goYyA9PiB0aGlzLnB1c2goYykpO1xyXG4gIH1cclxuXHJcbiAgcHJvY2VzcygpIHtcclxuICAgIGlmICh0aGlzLmNvbW1hbmRzLmxlbmd0aCkge1xyXG4gICAgICBjb25zdCBjb21tYW5kID0gdGhpcy5jb21tYW5kcy5zaGlmdCgpO1xyXG4gICAgICBjb21tYW5kLmV4ZWN1dGUoKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwcm9jZXNzQWxsKCkge1xyXG4gICAgdGhpcy5wcm9jZXNzKCkgJiYgdGhpcy5wcm9jZXNzQWxsKCk7XHJcbiAgfVxyXG5cclxuICBwdXNoKGNvbW1hbmQpIHtcclxuICAgIHRoaXMuY29tbWFuZHMucHVzaChjb21tYW5kKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tbWFuZCB7XHJcbiAgZXhlY3V0ZSgpIHtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENvbW1hbmQgZnJvbSAnLi9jb21tYW5kJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwYXduRW50aXR5Q29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xyXG4gIGNvbnN0cnVjdG9yKGVudGl0eSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gIH1cclxuXHJcbiAgZXhlY3V0ZSgpIHtcclxuICAgIHRoaXMuZW50aXR5LnNwYXduKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0Q29udHJvbGxlciB7XHJcbiAgY29uc3RydWN0b3IocXVldWUpIHtcclxuICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICB9XHJcblxyXG4gIGhhbmRsZSgpIHtcclxuICB9XHJcblxyXG4gIHF1ZXVlQ29tbWFuZChjb21tYW5kKSB7XHJcbiAgICB0aGlzLnF1ZXVlLnB1c2goY29tbWFuZCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBTcGF3bkVudGl0eUNvbW1hbmQgZnJvbSAnLi4vY29tbWFuZHMvc3Bhd24tZW50aXR5LWNvbW1hbmQnO1xyXG5pbXBvcnQgSW5wdXRDb250cm9sbGVyIGZyb20gJy4vaW5wdXQtY29udHJvbGxlcic7XHJcbmltcG9ydCBhcHAgZnJvbSAnLi4vLi4vYXBwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcElucHV0Q29udHJvbGxlciBleHRlbmRzIElucHV0Q29udHJvbGxlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihhcHAuY29tbWFuZFF1ZXVlKTtcclxuICAgIHRoaXMuY3Vyc29yID0gYXBwLmN1cnNvcjtcclxuICAgIHRoaXMub2xkTW91c2VYID0gMDtcclxuICAgIHRoaXMub2xkTW91c2VZID0gMDtcclxuICB9XHJcblxyXG4gIGhhbmRsZSgpIHtcclxuICAgIHRoaXMubW91c2VYID0gYXBwLmlucHV0LmFjdGl2ZVBvaW50ZXIud29ybGRYO1xyXG4gICAgdGhpcy5tb3VzZVkgPSBhcHAuaW5wdXQuYWN0aXZlUG9pbnRlci53b3JsZFk7XHJcbiAgICB0aGlzLnRpbGVYID0gYXBwLnRpbGVYKHRoaXMubW91c2VYKTtcclxuICAgIHRoaXMudGlsZVkgPSBhcHAudGlsZVkodGhpcy5tb3VzZVkpO1xyXG5cclxuICAgIGlmICh0aGlzLmxlZnRNb3VzZUJ1dHRvbkRvd24pIHtcclxuICAgICAgLy8gY29uc3QgcGluZSA9IGFwcC5jcmVhdGUucGluZVRyZWUodGhpcy50aWxlWCwgdGhpcy50aWxlWSk7XHJcbiAgICAgIGNvbnN0IGZveCA9IGFwcC5jcmVhdGUuZm94KHRoaXMudGlsZVgsIHRoaXMudGlsZVkpO1xyXG5cclxuICAgICAgaWYgKGZveC5jYW5TcGF3bkF0KHRoaXMudGlsZVgsIHRoaXMudGlsZVkpKSB7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBTcGF3bkVudGl0eUNvbW1hbmQoZm94KTtcclxuICAgICAgICB0aGlzLnF1ZXVlQ29tbWFuZChjb21tYW5kKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmb3guZGVzdHJveSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucmlnaHRNb3VzZUJ1dHRvbkRvd24pIHtcclxuICAgICAgY29uc29sZS5sb2coJ3JtYicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub2xkTW91c2VYID0gdGhpcy5tb3VzZVg7XHJcbiAgICB0aGlzLm9sZE1vdXNlWSA9IHRoaXMubW91c2VZO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1vdXNlUG9zaXRpb25DaGFuZ2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub2xkTW91c2VYICE9IHRoaXMubW91c2VYIHx8IHRoaXMub2xkTW91c2VZICE9IHRoaXMubW91c2VZO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGxlZnRNb3VzZUJ1dHRvbkRvd24oKSB7XHJcbiAgICByZXR1cm4gYXBwLmlucHV0Lm1vdXNlUG9pbnRlci5sZWZ0QnV0dG9uLmlzRG93blxyXG4gIH1cclxuXHJcbiAgZ2V0IHJpZ2h0TW91c2VCdXR0b25Eb3duKCkge1xyXG4gICAgcmV0dXJuIGFwcC5pbnB1dC5tb3VzZVBvaW50ZXIucmlnaHRCdXR0b24uaXNEb3duXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBUaWxlIGZyb20gJy4vdGlsZSc7XHJcblxyXG5QaGFzZXIuVGlsZSA9IFRpbGU7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbGUgZXh0ZW5kcyBQaGFzZXIuVGlsZSB7XHJcbiAgLyoqXHJcbiAgICogR2V0IGJpbmFyeSBzdW0gb2YgYWxsIG5laWdoYm9ycy5cclxuICAgKi9cclxuICBiaW5hcnlTdW0odGVzdCkge1xyXG4gICAgbGV0IHN1bSA9IDA7XHJcbiAgICBsZXQgbXVsdGlwbGllciA9IDI1NjtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gLTE7IGkgPD0gMTsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHkgPSB0aGlzLnkgLSBpO1xyXG4gICAgICBjb25zdCByb3cgPSB0aGlzLmxheWVyLmRhdGFbeV07XHJcblxyXG4gICAgICBmb3IgKGxldCBqID0gLTE7IGogPD0gMTsgaisrKSB7XHJcbiAgICAgICAgaWYgKGkgPT09IDAgJiYgaiA9PT0gMCkgY29udGludWU7XHJcbiAgICAgICAgY29uc3QgeCA9IHRoaXMueCAtIGo7XHJcbiAgICAgICAgY29uc3QgdGlsZSA9IHJvdyAmJiB4IGluIHJvdyA/IHJvd1t4XSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0ZXN0KHRpbGUpKSBzdW0gKz0gbXVsdGlwbGllcjtcclxuXHJcbiAgICAgICAgbXVsdGlwbGllciAvPSAyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN1bTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBiaW5hcnkgc3VtIG9mIG5laWdoYm9ycyBvbmx5IHRha2luZyBpbnRvIGFjY291bnRcclxuICAgKiB0aGUgdG9wLCBsZWZ0LCByaWdodCwgYW5kIGJvdHRvbSB0aWxlcy5cclxuICAgKi9cclxuICBiaW5hcnlTdW1TaW1wbGUodGVzdCkge1xyXG4gICAgbGV0IHN1bSA9IDA7XHJcblxyXG4gICAgY29uc3QgZ2V0TmVpZ2hib3IgPSAoeCwgeSkgPT4ge1xyXG4gICAgICBpZiAoeSBpbiB0aGlzLmxheWVyLmRhdGEpIHtcclxuICAgICAgICBpZiAoeCBpbiB0aGlzLmxheWVyLmRhdGFbeV0pIHJldHVybiB0aGlzLmxheWVyLmRhdGFbeF1beV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHRvcCA9IGdldE5laWdoYm9yKHRoaXMueSAtIDEsIHRoaXMueCk7XHJcbiAgICBjb25zdCBsZWZ0ID0gZ2V0TmVpZ2hib3IodGhpcy55LCB0aGlzLnggLSAxKTtcclxuICAgIGNvbnN0IHJpZ2h0ID0gZ2V0TmVpZ2hib3IodGhpcy55LCB0aGlzLnggKyAxKTtcclxuICAgIGNvbnN0IGJvdHRvbSA9IGdldE5laWdoYm9yKHRoaXMueSArIDEsIHRoaXMueCk7XHJcblxyXG4gICAgaWYgKHRlc3QodG9wKSkgc3VtICs9IDQ7XHJcbiAgICBpZiAodGVzdChsZWZ0KSkgc3VtICs9IDE2O1xyXG4gICAgaWYgKHRlc3QocmlnaHQpKSBzdW0gKz0gMzI7XHJcbiAgICBpZiAodGVzdChib3R0b20pKSBzdW0gKz0gMTI4O1xyXG5cclxuICAgIHJldHVybiBzdW07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCb29sZWFuIGNoZWNrIGlmIHRoaXMgdGlsZSBleGlzdHMgb24gdGhlIGxheWVyIGJvdW5kYXJ5XHJcbiAgICovXHJcbiAgYXRCb3VuZGFyeSgpIHtcclxuICAgIHJldHVybiB0aGlzLnggPT09IDBcclxuICAgICAgfHwgdGhpcy55ID09PSAwXHJcbiAgICAgIHx8IHRoaXMueCA9PT0gdGhpcy5sYXllci53aWR0aCAtIDFcclxuICAgICAgfHwgdGhpcy55ID09PSB0aGlzLmxheWVyLmhlaWdodCAtIDE7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBhcHAgZnJvbSAnLi4vYXBwJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcCB7XHJcbiAgY29uc3RydWN0b3IobGV2ZWwpIHtcclxuICAgIHRoaXMudGlsZW1hcCA9IGFwcC5nYW1lLmFkZC50aWxlbWFwKGxldmVsKTtcclxuICAgIHRoaXMudGlsZW1hcC5hZGRUaWxlc2V0SW1hZ2UoJ3RlcnJhaW4nLCAndGVycmFpbicpO1xyXG5cclxuICAgIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMudGlsZW1hcC5jcmVhdGVMYXllcignYmFja2dyb3VuZCcpO1xuXG4gICAgdGhpcy5zdGF0aWMgPSBhcHAuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IGFwcCBmcm9tICcuLi9hcHAnO1xyXG5pbXBvcnQgZW50aXRpZXMgZnJvbSAnLi4vZW50aXRpZXMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XHJcbiAgY3JlYXRlKCkge1xyXG4gICAgYXBwLmluaXQodGhpcy5nYW1lKTtcclxuXHJcbiAgICBhcHAuY3JlYXRlLnBpbmVUcmVlKDgsIDQpLnNwYXduKCk7XHJcbiAgICBhcHAuY3JlYXRlLnBpbmVUcmVlKDYsIDUpLnNwYXduKCk7XHJcbiAgICBhcHAuY3JlYXRlLmZveCgxNCwgNikuc3Bhd24oKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGFwcC51cGRhdGUoKTtcclxuICB9XHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRpbmcgZXh0ZW5kcyBQaGFzZXIuU3RhdGUge1xyXG4gIHByZWxvYWQoKSB7XHJcbiAgICB0aGlzLmdhbWUuc3RhZ2Uuc21vb3RoZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubG9hZGluZ0JhciA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53b3JsZC5jZW50ZXJYLCB0aGlzLmdhbWUud29ybGQuY2VudGVyWSArIDEyOCwgJ2xvYWRpbmctYmFyJyk7XHJcbiAgICB0aGlzLmxvYWRpbmdCYXIuYW5jaG9yLnNldFRvKDAuNSk7XHJcbiAgICB0aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmxvYWRpbmdCYXIpO1xyXG5cclxuICAgIHRoaXMubG9hZC5pbWFnZSgnZ3JvdW5kJywgJ2ltZy9ncm91bmQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RlcnJhaW4nLCAnaW1nL3RlcnJhaW4tMTYucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3dhbGwnLCAnaW1nL3dhbGxzLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0b3dlcicsICdpbWcvdG93ZXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2ZsYWcnLCAnaW1nL2ZsYWcucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3NocnViJywgJ2ltZy9zaHJ1Yi5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncGluZS10cmVlJywgJ2ltZy9waW5lLXRyZWUucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2ZveCcsICdpbWcvZm94LnBuZycpO1xyXG5cclxuICAgIHRoaXMubG9hZC50aWxlbWFwKCdpc2xhbmQnLCAnbWFwcy9pc2xhbmQuanNvbicsIG51bGwsIFBoYXNlci5UaWxlbWFwLlRJTEVEX0pTT04pO1xyXG4gICAgdGhpcy5sb2FkLnRpbGVtYXAoJ2NyYXp5dG93bicsICdtYXBzL2NyYXp5dG93bi5qc29uJywgbnVsbCwgUGhhc2VyLlRpbGVtYXAuVElMRURfSlNPTik7XHJcbiAgICB0aGlzLmxvYWQudGlsZW1hcCgndGlueScsICdtYXBzL3RpbnkuanNvbicsIG51bGwsIFBoYXNlci5UaWxlbWFwLlRJTEVEX0pTT04pO1xyXG4gICAgdGhpcy5sb2FkLnRpbGVtYXAoJ3BhcmFkaXNlJywgJ21hcHMvcGFyYWRpc2UuanNvbicsIG51bGwsIFBoYXNlci5UaWxlbWFwLlRJTEVEX0pTT04pO1xyXG5cclxuICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldCgnY3Vyc29yJywgJ2ltZy9jdXJzb3IucG5nJywgMTYsIDE2KTtcclxuICAgIHRoaXMubG9hZC5hdGxhcygnd2FsbHMnLCAnaW1nL3dhbGxzLnBuZycsICdhdGxhcy93YWxscy5qc29uJyk7XHJcbiAgICB0aGlzLmxvYWQuYXRsYXMoJ2ludGVyaW9yJywgJ2ltZy9pbnRlcmlvci1vcmFuZ2UucG5nJywgJ2F0bGFzL2ludGVyaW9yLmpzb24nKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGFnZS5zbW9vdGhlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzMwNjA4Mic7XHJcbiAgICB0aGlzLnN0YXRlLnN0YXJ0KCdHYW1lJyk7XHJcbiAgfVxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVsb2FkIGV4dGVuZHMgUGhhc2VyLlN0YXRlIHtcclxuICBwcmVsb2FkKCkge1xyXG4gICAgdGhpcy5nYW1lLmxvYWQuaW1hZ2UoJ2xvYWRpbmctYmFyJywgJ2ltZy9sb2FkaW5nLWJhci5wbmcnKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZSgpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzMwNjA4Mic7XHJcbiAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5VU0VSX1NDQUxFO1xyXG4gICAgdGhpcy5nYW1lLnNjYWxlLnNldFVzZXJTY2FsZSgyLCAyKTtcclxuXHJcbiAgICB0aGlzLmdhbWUucmVuZGVyZXIucmVuZGVyU2Vzc2lvbi5yb3VuZFBpeGVscyA9IHRydWU7XHJcbiAgICBQaGFzZXIuQ2FudmFzLnNldEltYWdlUmVuZGVyaW5nQ3Jpc3AodGhpcy5nYW1lLmNhbnZhcyk7XHJcblxyXG4gICAgdGhpcy5zdGF0ZS5zdGFydCgnTG9hZGluZycpO1xyXG4gIH1cclxufTtcclxuIiwiaW1wb3J0IGdlb3RpYyBmcm9tICdnZW90aWMnO1xyXG5pbXBvcnQgYXBwIGZyb20gJy4uL2FwcCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZ2VudFN5c3RlbSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoZHQpIHtcclxuICAgIGNvbnN0IGFjdG9ycyA9IGdlb3RpYy5maW5kQnlDb21wb25lbnQoJ2FnZW50Jyk7XHJcblxyXG4gICAgYWN0b3JzLmZvckVhY2goYWN0b3IgPT4ge1xyXG4gICAgICBhY3Rvci5hZ2VudC51cGRhdGUoZHQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBnZW90aWMgZnJvbSAnZ2VvdGljJztcclxuaW1wb3J0IGFwcCBmcm9tICcuLi9hcHAnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm91bmRzU3lzdGVtIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSgpIHtcclxuICAgIGNvbnN0IGFjdG9ycyA9IGdlb3RpYy5maW5kQnlDb21wb25lbnQoJ2JvdW5kcycpO1xyXG5cclxuICAgIGlmICh0aGlzLmRlYnVnKSB7XHJcbiAgICAgIGFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcclxuICAgICAgICBhY3Rvci5ib3VuZHMuZGVidWcoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcHAuZ2FtZS5kZWJ1Zy5yZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0="}